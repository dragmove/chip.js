/**
 * @update : 2016-11-14 17:26:17
 */
!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){eval("'use strict';\n\nvar _FullSizeCanvasVideo = __webpack_require__(2);\n\nvar _FullSizeCanvasVideo2 = _interopRequireDefault(_FullSizeCanvasVideo);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function ($) {\n  \"use strict\";\n\n  $(document).ready(init);\n\n  function init() {\n    // testNavi();\n    // testNaviHasTimer();\n    // testImageLoader();\n    // testFullSizeBg();\n    // testOverlay();\n    // testFullSizeVideo();\n    testFullSizeCanvasVideo();\n  }\n\n  function testFullSizeCanvasVideo() {\n    var canvasVideo = new _FullSizeCanvasVideo2.default({\n      parent: $('.canvas-video'),\n      videoClass: 'video',\n      canvasClass: 'canvas',\n\n      autoplay: true,\n      loop: true,\n      muted: false,\n\n      width: 960,\n      height: 540,\n      alignX: 'center',\n      alignY: 'center',\n\n      fps: 30,\n      videoUrl: 'http://akvod.plaync.com/RK/MOVIES/PREREGISTER3/960x540.mp4',\n      posterUrl: './img/poster.jpg',\n\n      contentMode: _FullSizeCanvasVideo2.default.ASPECT_FIT,\n\n      canplayCallback: function canplayCallback(obj) {\n        // iOS, Adr v\n        console.log('external canplayCallback() obj :', obj);\n      },\n\n      timeupdateCallback: function timeupdateCallback(obj) {// iOS, Adr v\n        //console.log('external timeupdateCallback() obj :', obj);\n      },\n\n      endedCallback: function endedCallback(obj) {\n        // iOS, Adr v\n        console.log('external endedCallback() obj :', obj);\n      },\n\n      visibilitychangeCallback: function visibilitychangeCallback(obj) {\n        console.log('extenal visibilitychangeCallback() obj :', obj);\n\n        if (obj.documentHidden) {\n          canvasVideo.pause();\n        } else {\n          canvasVideo.play();\n        }\n      }\n    });\n    canvasVideo.init();\n\n    $(window).on('resize', function (evt) {\n      console.log('main.js - resize. window.innerWidth, window.innerHeight :', window.innerWidth, window.innerHeight);\n\n      $('.canvas-video').css({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n\n      $('#wrapper').css({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    }).trigger('resize');\n\n    // test btns\n    $('#btn-play').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.play();\n    });\n\n    $('#btn-pause').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.pause();\n    });\n\n    $('#btn-stop').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.stop();\n    });\n\n    $('#btn-seek').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.seek(30);\n    });\n  }\n})(jQuery); // import Navi from './component/Navi';\n// import NaviHasTimer from './component/NaviHasTimer';\n// import ImageLoader from './component/ImageLoader';\n// import FullSizeBg from './component/FullSizeBg';\n// import Overlay from './component/Overlay';\n// import FullSizeVideo from './component/FullSizeVideo';//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL21haW4uanM/MTdmNiJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImluaXQiLCJ0ZXN0RnVsbFNpemVDYW52YXNWaWRlbyIsImNhbnZhc1ZpZGVvIiwicGFyZW50IiwidmlkZW9DbGFzcyIsImNhbnZhc0NsYXNzIiwiYXV0b3BsYXkiLCJsb29wIiwibXV0ZWQiLCJ3aWR0aCIsImhlaWdodCIsImFsaWduWCIsImFsaWduWSIsImZwcyIsInZpZGVvVXJsIiwicG9zdGVyVXJsIiwiY29udGVudE1vZGUiLCJBU1BFQ1RfRklUIiwiY2FucGxheUNhbGxiYWNrIiwib2JqIiwiY29uc29sZSIsImxvZyIsInRpbWV1cGRhdGVDYWxsYmFjayIsImVuZGVkQ2FsbGJhY2siLCJ2aXNpYmlsaXR5Y2hhbmdlQ2FsbGJhY2siLCJkb2N1bWVudEhpZGRlbiIsInBhdXNlIiwicGxheSIsIndpbmRvdyIsIm9uIiwiZXZ0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiY3NzIiwidHJpZ2dlciIsInByZXZlbnREZWZhdWx0Iiwic3RvcCIsInNlZWsiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI7O0FBTUE7Ozs7OztBQUVDLFdBQVNBLENBQVQsRUFBWTtBQUNYOztBQUNBQSxJQUFFQyxRQUFGLEVBQVlDLEtBQVosQ0FBa0JDLElBQWxCOztBQUVBLFdBQVNBLElBQVQsR0FBZ0I7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUM7QUFDRDs7QUFFRCxXQUFTQSx1QkFBVCxHQUFtQztBQUNqQyxRQUFJQyxjQUFjLGtDQUF3QjtBQUN4Q0MsY0FBUU4sRUFBRSxlQUFGLENBRGdDO0FBRXhDTyxrQkFBWSxPQUY0QjtBQUd4Q0MsbUJBQWEsUUFIMkI7O0FBS3hDQyxnQkFBVSxJQUw4QjtBQU14Q0MsWUFBTSxJQU5rQztBQU94Q0MsYUFBTyxLQVBpQzs7QUFTeENDLGFBQU8sR0FUaUM7QUFVeENDLGNBQVEsR0FWZ0M7QUFXeENDLGNBQVEsUUFYZ0M7QUFZeENDLGNBQVEsUUFaZ0M7O0FBY3hDQyxXQUFLLEVBZG1DO0FBZXhDQyxnQkFBVSw0REFmOEI7QUFnQnhDQyxpQkFBVyxrQkFoQjZCOztBQWtCeENDLG1CQUFhLDhCQUFvQkMsVUFsQk87O0FBb0J4Q0MsdUJBQWlCLHlCQUFDQyxHQUFELEVBQVM7QUFBRTtBQUMxQkMsZ0JBQVFDLEdBQVIsQ0FBWSxrQ0FBWixFQUFnREYsR0FBaEQ7QUFDRCxPQXRCdUM7O0FBd0J4Q0csMEJBQW9CLDRCQUFDSCxHQUFELEVBQVMsQ0FBRTtBQUM3QjtBQUNELE9BMUJ1Qzs7QUE0QnhDSSxxQkFBZSx1QkFBQ0osR0FBRCxFQUFTO0FBQUU7QUFDeEJDLGdCQUFRQyxHQUFSLENBQVksZ0NBQVosRUFBOENGLEdBQTlDO0FBQ0QsT0E5QnVDOztBQWdDeENLLGdDQUEwQixrQ0FBQ0wsR0FBRCxFQUFTO0FBQ2pDQyxnQkFBUUMsR0FBUixDQUFZLDBDQUFaLEVBQXdERixHQUF4RDs7QUFFQSxZQUFHQSxJQUFJTSxjQUFQLEVBQXVCO0FBQ3JCdkIsc0JBQVl3QixLQUFaO0FBQ0QsU0FGRCxNQUVPO0FBQ0x4QixzQkFBWXlCLElBQVo7QUFDRDtBQUNGO0FBeEN1QyxLQUF4QixDQUFsQjtBQTBDQXpCLGdCQUFZRixJQUFaOztBQUVBSCxNQUFFK0IsTUFBRixFQUFVQyxFQUFWLENBQWEsUUFBYixFQUF1QixVQUFTQyxHQUFULEVBQWM7QUFDbkNWLGNBQVFDLEdBQVIsQ0FBWSwyREFBWixFQUF5RU8sT0FBT0csVUFBaEYsRUFBNEZILE9BQU9JLFdBQW5HOztBQUVBbkMsUUFBRSxlQUFGLEVBQW1Cb0MsR0FBbkIsQ0FBdUI7QUFDckJ4QixlQUFPbUIsT0FBT0csVUFETztBQUVyQnJCLGdCQUFRa0IsT0FBT0k7QUFGTSxPQUF2Qjs7QUFLQW5DLFFBQUUsVUFBRixFQUFjb0MsR0FBZCxDQUFrQjtBQUNoQnhCLGVBQU9tQixPQUFPRyxVQURFO0FBRWhCckIsZ0JBQVFrQixPQUFPSTtBQUZDLE9BQWxCO0FBSUQsS0FaRCxFQVlHRSxPQVpILENBWVcsUUFaWDs7QUFjQTtBQUNBckMsTUFBRSxXQUFGLEVBQWVnQyxFQUFmLENBQWtCLE9BQWxCLEVBQTJCLFVBQVNDLEdBQVQsRUFBYztBQUN2Q0EsVUFBSUssY0FBSjtBQUNBakMsa0JBQVl5QixJQUFaO0FBQ0QsS0FIRDs7QUFLQTlCLE1BQUUsWUFBRixFQUFnQmdDLEVBQWhCLENBQW1CLE9BQW5CLEVBQTRCLFVBQVNDLEdBQVQsRUFBYztBQUN4Q0EsVUFBSUssY0FBSjtBQUNBakMsa0JBQVl3QixLQUFaO0FBQ0QsS0FIRDs7QUFLQTdCLE1BQUUsV0FBRixFQUFlZ0MsRUFBZixDQUFrQixPQUFsQixFQUEyQixVQUFTQyxHQUFULEVBQWM7QUFDdkNBLFVBQUlLLGNBQUo7QUFDQWpDLGtCQUFZa0MsSUFBWjtBQUNELEtBSEQ7O0FBS0F2QyxNQUFFLFdBQUYsRUFBZWdDLEVBQWYsQ0FBa0IsT0FBbEIsRUFBMkIsVUFBU0MsR0FBVCxFQUFjO0FBQ3ZDQSxVQUFJSyxjQUFKO0FBQ0FqQyxrQkFBWW1DLElBQVosQ0FBaUIsRUFBakI7QUFDRCxLQUhEO0FBSUQ7QUFDRixDQTlGQSxFQThGQ0MsTUE5RkQsQ0FBRCxDLENBUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgTmF2aSBmcm9tICcuL2NvbXBvbmVudC9OYXZpJztcclxuLy8gaW1wb3J0IE5hdmlIYXNUaW1lciBmcm9tICcuL2NvbXBvbmVudC9OYXZpSGFzVGltZXInO1xyXG4vLyBpbXBvcnQgSW1hZ2VMb2FkZXIgZnJvbSAnLi9jb21wb25lbnQvSW1hZ2VMb2FkZXInO1xyXG4vLyBpbXBvcnQgRnVsbFNpemVCZyBmcm9tICcuL2NvbXBvbmVudC9GdWxsU2l6ZUJnJztcclxuLy8gaW1wb3J0IE92ZXJsYXkgZnJvbSAnLi9jb21wb25lbnQvT3ZlcmxheSc7XHJcbi8vIGltcG9ydCBGdWxsU2l6ZVZpZGVvIGZyb20gJy4vY29tcG9uZW50L0Z1bGxTaXplVmlkZW8nO1xyXG5pbXBvcnQgRnVsbFNpemVDYW52YXNWaWRlbyBmcm9tICcuL2NvbXBvbmVudC9GdWxsU2l6ZUNhbnZhc1ZpZGVvJztcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgJChkb2N1bWVudCkucmVhZHkoaW5pdCk7XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAvLyB0ZXN0TmF2aSgpO1xyXG4gICAgLy8gdGVzdE5hdmlIYXNUaW1lcigpO1xyXG4gICAgLy8gdGVzdEltYWdlTG9hZGVyKCk7XHJcbiAgICAvLyB0ZXN0RnVsbFNpemVCZygpO1xyXG4gICAgLy8gdGVzdE92ZXJsYXkoKTtcclxuICAgIC8vIHRlc3RGdWxsU2l6ZVZpZGVvKCk7XHJcbiAgICB0ZXN0RnVsbFNpemVDYW52YXNWaWRlbygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdGVzdEZ1bGxTaXplQ2FudmFzVmlkZW8oKSB7XHJcbiAgICBsZXQgY2FudmFzVmlkZW8gPSBuZXcgRnVsbFNpemVDYW52YXNWaWRlbyh7XHJcbiAgICAgIHBhcmVudDogJCgnLmNhbnZhcy12aWRlbycpLFxyXG4gICAgICB2aWRlb0NsYXNzOiAndmlkZW8nLFxyXG4gICAgICBjYW52YXNDbGFzczogJ2NhbnZhcycsXHJcblxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgbXV0ZWQ6IGZhbHNlLFxyXG5cclxuICAgICAgd2lkdGg6IDk2MCxcclxuICAgICAgaGVpZ2h0OiA1NDAsXHJcbiAgICAgIGFsaWduWDogJ2NlbnRlcicsXHJcbiAgICAgIGFsaWduWTogJ2NlbnRlcicsXHJcblxyXG4gICAgICBmcHM6IDMwLFxyXG4gICAgICB2aWRlb1VybDogJ2h0dHA6Ly9ha3ZvZC5wbGF5bmMuY29tL1JLL01PVklFUy9QUkVSRUdJU1RFUjMvOTYweDU0MC5tcDQnLFxyXG4gICAgICBwb3N0ZXJVcmw6ICcuL2ltZy9wb3N0ZXIuanBnJyxcclxuXHJcbiAgICAgIGNvbnRlbnRNb2RlOiBGdWxsU2l6ZUNhbnZhc1ZpZGVvLkFTUEVDVF9GSVQsXHJcblxyXG4gICAgICBjYW5wbGF5Q2FsbGJhY2s6IChvYmopID0+IHsgLy8gaU9TLCBBZHIgdlxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdleHRlcm5hbCBjYW5wbGF5Q2FsbGJhY2soKSBvYmogOicsIG9iaik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB0aW1ldXBkYXRlQ2FsbGJhY2s6IChvYmopID0+IHsgLy8gaU9TLCBBZHIgdlxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2V4dGVybmFsIHRpbWV1cGRhdGVDYWxsYmFjaygpIG9iaiA6Jywgb2JqKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVuZGVkQ2FsbGJhY2s6IChvYmopID0+IHsgLy8gaU9TLCBBZHIgdlxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdleHRlcm5hbCBlbmRlZENhbGxiYWNrKCkgb2JqIDonLCBvYmopO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrOiAob2JqKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2V4dGVuYWwgdmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrKCkgb2JqIDonLCBvYmopO1xyXG5cclxuICAgICAgICBpZihvYmouZG9jdW1lbnRIaWRkZW4pIHtcclxuICAgICAgICAgIGNhbnZhc1ZpZGVvLnBhdXNlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNhbnZhc1ZpZGVvLnBsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY2FudmFzVmlkZW8uaW5pdCgpO1xyXG5cclxuICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdtYWluLmpzIC0gcmVzaXplLiB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IDonLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuXHJcbiAgICAgICQoJy5jYW52YXMtdmlkZW8nKS5jc3Moe1xyXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICQoJyN3cmFwcGVyJykuY3NzKHtcclxuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgfSk7XHJcbiAgICB9KS50cmlnZ2VyKCdyZXNpemUnKTtcclxuXHJcbiAgICAvLyB0ZXN0IGJ0bnNcclxuICAgICQoJyNidG4tcGxheScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2FudmFzVmlkZW8ucGxheSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2J0bi1wYXVzZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2FudmFzVmlkZW8ucGF1c2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNidG4tc3RvcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2FudmFzVmlkZW8uc3RvcCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2J0bi1zZWVrJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjYW52YXNWaWRlby5zZWVrKDMwKTtcclxuICAgIH0pO1xyXG4gIH1cclxufShqUXVlcnkpKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3JjL21haW4uanMiXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FullSizeCanvasVideo = function () {\n  function FullSizeCanvasVideo(options) {\n    _classCallCheck(this, FullSizeCanvasVideo);\n\n    var _ = this;\n\n    _.option = {\n      parent: null,\n      videoClass: 'video',\n      canvasClass: 'canvas',\n      width: 320,\n      height: 240,\n      alignX: 'center',\n      alignY: 'center',\n\n      fps: 30, // TODO - check\n      videoUrl: '',\n      posterUrl: '',\n\n      autoplay: true,\n      loop: true,\n      muted: false,\n\n      contentMode: FullSizeCanvasVideo.ASPECT_FILL, // TODO - add ASPECT_FIT\n\n      canplayCallback: null,\n      timeupdateCallback: null,\n      endedCallback: null,\n\n      visibilitychangeCallback: null\n    };\n    $.extend(_.option, options);\n\n    _.parent = _.option.parent;\n\n    if (_.parent.length <= 0) {\n      throw new Error('FullSizeCanvasVideo Class require options have parent.');\n      return;\n    }\n\n    _.$video = null;\n    _.$canvas = null;\n\n    _.video = null;\n    _.canvas = null;\n    _.ctx = null;\n\n    _.isPlaying = false;\n    _.lastRenderTime = 0;\n    _.animationFrame = null;\n\n    _.getVideoSize = _.getVideoContentModeFunc(_.option.contentMode);\n    _.$proxyResize = $.proxy(_.resize, _);\n  }\n\n  _createClass(FullSizeCanvasVideo, [{\n    key: 'init',\n    value: function init(obj) {\n      this.setInstance();\n      this.setCallbacks();\n    }\n  }, {\n    key: 'setInstance',\n    value: function setInstance() {\n      var _ = this,\n          opt = _.option;\n\n      _.$video = $(_.getVideoTpl()).css({ position: 'absolute' });\n      _.$canvas = $(_.getCanvasTpl()).css({ position: 'absolute' });\n      _.parent.append(_.$video);\n      _.parent.append(_.$canvas);\n\n      _.video = _.$video.get(0);\n      _.canvas = _.$canvas.get(0);\n      _.ctx = this.canvas.getContext('2d');\n\n      if (opt.loop === true) _.video.setAttribute('loop', '');\n      if (opt.muted === true) _.video.setAttribute('muted', '');\n      if (opt.autoplay === true) _.video.setAttribute('autoplay', ''); // iOS video node already has \"autoplay\" attribute\n\n      var size = _.getVideoSize();\n      _.setVideoSize(size.width, size.height);\n      _.setCanvasSize(size.width, size.height);\n      _.setWrapAlign(opt.alignX, opt.alignY, size);\n\n      if (_.isIOS()) {\n        _.$video.hide();\n\n        _.play();\n        if (!_.option.autoplay) _.pause();\n      } else {\n        this.$canvas.hide();\n\n        _.$video.on('click', function (evt) {\n          _.play();\n        });\n      }\n\n      $(window).on('resize', _.$proxyResize);\n      _.resize();\n    }\n  }, {\n    key: 'setCallbacks',\n    value: function setCallbacks() {\n      var _ = this,\n          opt = _.option,\n          isVideoHasOnended = _.video.hasOwnProperty('onended');\n\n      if (_.isIOS()) {\n        _.$video.on('canplay', function (evt) {\n          _.drawVideoToCanvas();\n          if (opt.canplayCallback) {\n            opt.canplayCallback.call(null, {\n              event: evt,\n              video: _.video\n            });\n          }\n        });\n\n        _.$video.on('timeupdate', function (evt) {\n          _.drawVideoToCanvas();\n\n          if (opt.timeupdateCallback) {\n            opt.timeupdateCallback.call(null, {\n              event: evt,\n              video: _.video,\n              currentTime: _.video.currentTime,\n              duration: _.video.duration\n            });\n          }\n        });\n      } else {\n        _.$video.on('canplay', function (evt) {\n          if (opt.canplayCallback) {\n            opt.canplayCallback.call(null, {\n              event: evt,\n              video: _.video\n            });\n          }\n        });\n\n        if (opt.timeupdateCallback || !isVideoHasOnended && opt.endedCallback) {\n          _.$video.on('timeupdate', function (evt) {\n            if (opt.timeupdateCallback) {\n              opt.timeupdateCallback.call(null, {\n                event: evt,\n                video: _.video,\n                currentTime: _.video.currentTime,\n                duration: _.video.duration\n              });\n            }\n\n            if (opt.endedCallback && _.video.currentTime >= _.video.duration) {\n              if (opt.loop === true) return;\n\n              _.isPlaying = false;\n\n              opt.endedCallback.call(null, {\n                event: evt,\n                video: _.video,\n                currentTime: _.video.currentTime,\n                duration: _.video.duration\n              });\n            }\n          });\n        }\n\n        if (isVideoHasOnended && opt.endedCallback) {\n          // TODO - no browser support 'ended' event now.\n          $(video).on('ended', function (evt) {\n            _.isPlaying = false;\n\n            opt.endedCallback.call(null, {\n              event: evt,\n              video: _.video,\n              currentTime: _.video.currentTime,\n              duration: _.video.duration\n            });\n          });\n        }\n      }\n\n      if (opt.visibilitychangeCallback) {\n        (function () {\n          // todo - change to vendor prefix util.\n          var hidden = void 0,\n              visibilityState = void 0,\n              visibilityChange = void 0;\n          if (typeof document.hidden !== 'undefined') {\n            // Opera 12.10 and Firefox 18 and later support\n            hidden = 'hidden';\n            visibilityState = 'visibilityState';\n            visibilityChange = 'visibilitychange';\n          } else if (typeof document.msHidden !== 'undefined') {\n            hidden = 'msHidden';\n            visibilityState = 'msVisibilityState';\n            visibilityChange = 'msvisibilitychange';\n          } else if (typeof document.webkitHidden !== 'undefined') {\n            hidden = 'webkitHidden';\n            visibilityState = 'webkitVisibilityState';\n            visibilityChange = 'webkitvisibilitychange';\n          }\n\n          $(document).on(visibilityChange, function (evt) {\n            console.log('visibilitychange :', evt);\n            console.log('hidden', document[hidden]);\n            console.log('visibilityState', document[visibilityState]); // visible, hidden, prerender, unloaded\n\n            opt.visibilitychangeCallback.call(null, {\n              event: evt,\n              video: _.video,\n              documentHidden: document[hidden],\n              documentVisibilityState: document[visibilityState] // visible, hidden, prerender, unloaded\n            });\n          });\n        })();\n      }\n    }\n  }, {\n    key: 'setWrapAlign',\n    value: function setWrapAlign(alignX, alignY, modifiedSize) {\n      var winWidth = window.innerWidth,\n          winHeight = window.innerHeight,\n          left = 0,\n          top = 0;\n\n      switch (alignX) {\n        case 'left':\n          left = 0;\n          break;\n\n        case 'center':\n          left = Math.round((winWidth - modifiedSize.width) / 2);\n          break;\n\n        case 'right':\n          left = Math.round(winWidth - modifiedSize.width);\n          break;\n      }\n\n      switch (alignY) {\n        case 'top':\n          top = 0;\n          break;\n\n        case 'center':\n          top = Math.round((winHeight - modifiedSize.height) / 2);\n          break;\n\n        case 'bottom':\n          top = Math.round(winHeight - modifiedSize.height);\n          break;\n      }\n\n      this.setVideoPosition({ left: left, top: top });\n      this.setCanvasPosition({ left: left, top: top });\n    }\n  }, {\n    key: 'setVideoPosition',\n    value: function setVideoPosition(cssObj) {\n      this.$video.css(cssObj);\n    }\n  }, {\n    key: 'setCanvasPosition',\n    value: function setCanvasPosition(cssObj) {\n      this.$canvas.css(cssObj);\n    }\n  }, {\n    key: 'setVideoSize',\n    value: function setVideoSize(width, height) {\n      this.$video.width(width);\n      this.$video.height(height);\n    }\n  }, {\n    key: 'setCanvasSize',\n    value: function setCanvasSize(width, height) {\n      var _ = this;\n\n      if (_.isIOS()) {\n        _.ctx.canvas.width = width;\n        _.ctx.canvas.height = height;\n        _.$canvas.attr({ width: width, height: height });\n      }\n    }\n  }, {\n    key: 'drawVideoToCanvas',\n    value: function drawVideoToCanvas() {\n      var _ = this;\n      _.ctx.drawImage(_.video, 0, 0, _.$video.width(), _.$video.height());\n    }\n  }, {\n    key: 'loopAnimationFrameIOS',\n    value: function loopAnimationFrameIOS() {\n      var _ = this,\n          opt = _.option;\n\n      var now = Date.now(),\n          elapsedTime = (now - _.lastRenderTime) / 1000;\n\n      if (elapsedTime >= 1 / _.option.fps) {\n        _.video.currentTime = _.video.currentTime + elapsedTime;\n        _.lastRenderTime = now;\n      }\n\n      if (_.video.currentTime >= _.video.duration) {\n        _.isPlaying = false;\n\n        if (opt.loop === true) {\n          _.seek(0);\n          _.play();\n        } else {\n          opt.endedCallback.call(null, {\n            event: null,\n            video: _.video,\n            currentTime: _.video.currentTime,\n            duration: _.video.duration\n          });\n\n          _.stop();\n        }\n      }\n\n      if (_.isPlaying) {\n        _.animationFrame = requestAnimationFrame(function () {\n          _.loopAnimationFrameIOS();\n        });\n      } else {\n        cancelAnimationFrame(_.animationFrame);\n        _.animationFrame = null;\n      }\n    }\n  }, {\n    key: 'resize',\n    value: function resize(evt) {\n      var _ = this,\n          size = _.getVideoSize();\n\n      _.setVideoSize(size.width, size.height);\n      _.setCanvasSize(size.width, size.height);\n      _.setWrapAlign(_.option.alignX, _.option.alignY, size);\n\n      if (_.isIOS()) _.drawVideoToCanvas();\n    }\n  }, {\n    key: 'getVideoTpl',\n    value: function getVideoTpl() {\n      var _ = this,\n          opt = _.option;\n\n      var videoSourceTpl = '',\n          ext = opt.videoUrl.split('.').pop().toLowerCase();\n      videoSourceTpl += '<source src=\"' + opt.videoUrl + '\" type=\"video/' + ext + '\"></source>';\n\n      var tpl = '<video class=\"' + opt.videoClass + '\" poster=\"' + opt.posterUrl + '\">' + videoSourceTpl + '</video>';\n      if (_.isIOS()) {\n        tpl = '<video class=\"' + opt.videoClass + '\" poster=\"' + opt.posterUrl + '\" autoplay>' + videoSourceTpl + '</video>';\n      }\n      //let tpl = `<video class=\"${opt.videoClass}\" muted=\"true\" loop=\"true\" autoplay=\"true\" poster=\"\">${videoSourceTpl}</video>`;\n\n      return tpl;\n    }\n  }, {\n    key: 'getCanvasTpl',\n    value: function getCanvasTpl() {\n      return '<canvas class=\"' + this.option.canvasClass + '\"></canvas>';\n    }\n  }, {\n    key: 'getVideoSizeWidthFit',\n    value: function getVideoSizeWidthFit() {\n      var _ = this,\n          opt = _.option;\n\n      var winWidth = window.innerWidth,\n          modifiedSizeW = winWidth,\n          modifiedSizeH = Math.ceil(winWidth / opt.width * opt.height);\n\n      return {\n        width: modifiedSizeW,\n        height: modifiedSizeH\n      };\n    }\n  }, {\n    key: 'getVideoSizeAspectFill',\n    value: function getVideoSizeAspectFill() {\n      var _ = this,\n          opt = _.option;\n\n      var winWidth = window.innerWidth,\n          winHeight = window.innerHeight,\n          modifiedSizeW = winWidth,\n          modifiedSizeH = Math.ceil(winWidth / opt.width * opt.height);\n\n      if (modifiedSizeH < winHeight) {\n        modifiedSizeW = Math.ceil(winHeight / opt.height * opt.width);\n        modifiedSizeH = winHeight;\n      }\n\n      return {\n        width: modifiedSizeW,\n        height: modifiedSizeH\n      };\n    }\n  }, {\n    key: 'getVideoSizeAspectFit',\n    value: function getVideoSizeAspectFit() {\n      var _ = this,\n          opt = _.option;\n\n      var winWidth = window.innerWidth,\n          winHeight = window.innerHeight,\n          modifiedSizeW = 0,\n          modifiedSizeH = 0;\n\n      console.log('(winWidth / opt.width) :', winWidth / opt.width);\n      console.log('(winHeight / opt.height) :', winHeight / opt.height);\n\n      // TODO - CHANGE logic.\n      var ratio = Math.min(winWidth / opt.width, winHeight / opt.height);\n      modifiedSizeW = Math.ceil(opt.width * ratio);\n      modifiedSizeH = Math.ceil(opt.height * ratio);\n\n      /*\r\n      if( (winWidth / opt.width) < (winHeight / opt.height) ) {\r\n        modifiedSizeW = winWidth;\r\n        modifiedSizeH = Math.ceil(winHeight * (winWidth / opt.width));\r\n      } else {\r\n        modifiedSizeW = Math.ceil(winWidth * (winHeight / opt.height));\r\n        modifiedSizeH = winHeight;\r\n      }\r\n      */\n      console.log('modifiedSizeW :', modifiedSizeW);\n      console.log('modifiedSizeH :', modifiedSizeH);\n\n      return {\n        width: modifiedSizeW,\n        height: modifiedSizeH\n      };\n    }\n  }, {\n    key: 'getVideoContentModeFunc',\n    value: function getVideoContentModeFunc(contentMode) {\n      var func = null;\n\n      switch (contentMode) {\n        case FullSizeCanvasVideo.ASPECT_FILL:\n          func = this.getVideoSizeAspectFill;\n          break;\n\n        case FullSizeCanvasVideo.ASPECT_FIT:\n          func = this.getVideoSizeAspectFit;\n          break;\n\n        case FullSizeCanvasVideo.WIDTH_FIT:\n          func = this.getVideoSizeWidthFit;\n          break;\n      }\n\n      return func;\n    }\n  }, {\n    key: 'isIOS',\n    value: function isIOS() {\n      return (/iPad|iPhone|iPod/.test(navigator.platform)\n      );\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.lastRenderTime = Date.now();\n        _.isPlaying = true;\n        _.loopAnimationFrameIOS();\n      } else {\n        _.isPlaying = true;\n        _.video.play();\n      }\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.isPlaying = false;\n      } else {\n        _.isPlaying = false;\n        _.video.pause();\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.pause();\n        _.seek(0);\n      } else {\n        _.video.pause();\n        _.video.currentTime = 0;\n      }\n    }\n  }, {\n    key: 'seek',\n    value: function seek(second) {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.video.currentTime = second;\n      } else {\n        _.video.currentTime = second;\n      }\n    }\n  }]);\n\n  return FullSizeCanvasVideo;\n}();\n\nFullSizeCanvasVideo.ASPECT_FILL = 'ASPECT_FILL';\nFullSizeCanvasVideo.ASPECT_FIT = 'ASPECT_FIT';\nFullSizeCanvasVideo.WIDTH_FIT = 'WIDTH_FIT';\n\nexports.default = FullSizeCanvasVideo;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2NvbXBvbmVudC9GdWxsU2l6ZUNhbnZhc1ZpZGVvLmpzPzU2NDMiXSwibmFtZXMiOlsiRnVsbFNpemVDYW52YXNWaWRlbyIsIm9wdGlvbnMiLCJfIiwib3B0aW9uIiwicGFyZW50IiwidmlkZW9DbGFzcyIsImNhbnZhc0NsYXNzIiwid2lkdGgiLCJoZWlnaHQiLCJhbGlnblgiLCJhbGlnblkiLCJmcHMiLCJ2aWRlb1VybCIsInBvc3RlclVybCIsImF1dG9wbGF5IiwibG9vcCIsIm11dGVkIiwiY29udGVudE1vZGUiLCJBU1BFQ1RfRklMTCIsImNhbnBsYXlDYWxsYmFjayIsInRpbWV1cGRhdGVDYWxsYmFjayIsImVuZGVkQ2FsbGJhY2siLCJ2aXNpYmlsaXR5Y2hhbmdlQ2FsbGJhY2siLCIkIiwiZXh0ZW5kIiwibGVuZ3RoIiwiRXJyb3IiLCIkdmlkZW8iLCIkY2FudmFzIiwidmlkZW8iLCJjYW52YXMiLCJjdHgiLCJpc1BsYXlpbmciLCJsYXN0UmVuZGVyVGltZSIsImFuaW1hdGlvbkZyYW1lIiwiZ2V0VmlkZW9TaXplIiwiZ2V0VmlkZW9Db250ZW50TW9kZUZ1bmMiLCIkcHJveHlSZXNpemUiLCJwcm94eSIsInJlc2l6ZSIsIm9iaiIsInNldEluc3RhbmNlIiwic2V0Q2FsbGJhY2tzIiwib3B0IiwiZ2V0VmlkZW9UcGwiLCJjc3MiLCJwb3NpdGlvbiIsImdldENhbnZhc1RwbCIsImFwcGVuZCIsImdldCIsImdldENvbnRleHQiLCJzZXRBdHRyaWJ1dGUiLCJzaXplIiwic2V0VmlkZW9TaXplIiwic2V0Q2FudmFzU2l6ZSIsInNldFdyYXBBbGlnbiIsImlzSU9TIiwiaGlkZSIsInBsYXkiLCJwYXVzZSIsIm9uIiwiZXZ0Iiwid2luZG93IiwiaXNWaWRlb0hhc09uZW5kZWQiLCJoYXNPd25Qcm9wZXJ0eSIsImRyYXdWaWRlb1RvQ2FudmFzIiwiY2FsbCIsImV2ZW50IiwiY3VycmVudFRpbWUiLCJkdXJhdGlvbiIsImhpZGRlbiIsInZpc2liaWxpdHlTdGF0ZSIsInZpc2liaWxpdHlDaGFuZ2UiLCJkb2N1bWVudCIsIm1zSGlkZGVuIiwid2Via2l0SGlkZGVuIiwiY29uc29sZSIsImxvZyIsImRvY3VtZW50SGlkZGVuIiwiZG9jdW1lbnRWaXNpYmlsaXR5U3RhdGUiLCJtb2RpZmllZFNpemUiLCJ3aW5XaWR0aCIsImlubmVyV2lkdGgiLCJ3aW5IZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnQiLCJ0b3AiLCJNYXRoIiwicm91bmQiLCJzZXRWaWRlb1Bvc2l0aW9uIiwic2V0Q2FudmFzUG9zaXRpb24iLCJjc3NPYmoiLCJhdHRyIiwiZHJhd0ltYWdlIiwibm93IiwiRGF0ZSIsImVsYXBzZWRUaW1lIiwic2VlayIsInN0b3AiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wQW5pbWF0aW9uRnJhbWVJT1MiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInZpZGVvU291cmNlVHBsIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJ0b0xvd2VyQ2FzZSIsInRwbCIsIm1vZGlmaWVkU2l6ZVciLCJtb2RpZmllZFNpemVIIiwiY2VpbCIsInJhdGlvIiwibWluIiwiZnVuYyIsImdldFZpZGVvU2l6ZUFzcGVjdEZpbGwiLCJBU1BFQ1RfRklUIiwiZ2V0VmlkZW9TaXplQXNwZWN0Rml0IiwiV0lEVEhfRklUIiwiZ2V0VmlkZW9TaXplV2lkdGhGaXQiLCJ0ZXN0IiwibmF2aWdhdG9yIiwicGxhdGZvcm0iLCJzZWNvbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFBTUEsbUI7QUFDSiwrQkFBWUMsT0FBWixFQUFxQjtBQUFBOztBQUNuQixRQUFJQyxJQUFJLElBQVI7O0FBRUFBLE1BQUVDLE1BQUYsR0FBVztBQUNUQyxjQUFRLElBREM7QUFFVEMsa0JBQVksT0FGSDtBQUdUQyxtQkFBYSxRQUhKO0FBSVRDLGFBQU8sR0FKRTtBQUtUQyxjQUFRLEdBTEM7QUFNVEMsY0FBUSxRQU5DO0FBT1RDLGNBQVEsUUFQQzs7QUFTVEMsV0FBSyxFQVRJ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V0FBUixHQUFzQixDQUF0QjtBQUNEO0FBQ0Y7Ozt5QkFFSXNELE0sRUFBUTtBQUNYLFVBQUl4SCxJQUFJLElBQVI7QUFDQSxVQUFJLENBQUNBLEVBQUUyQixLQUFQLEVBQWM7O0FBRWQsVUFBSTNCLEVBQUVzRCxLQUFGLEVBQUosRUFBZTtBQUNidEQsVUFBRTJCLEtBQUYsQ0FBUXVDLFdBQVIsR0FBc0JzRCxNQUF0QjtBQUNELE9BRkQsTUFFTztBQUNMeEgsVUFBRTJCLEtBQUYsQ0FBUXVDLFdBQVIsR0FBc0JzRCxNQUF0QjtBQUNEO0FBQ0Y7Ozs7OztBQUVIMUgsb0JBQW9Ca0IsV0FBcEIsR0FBa0MsYUFBbEM7QUFDQWxCLG9CQUFvQm1ILFVBQXBCLEdBQWlDLFlBQWpDO0FBQ0FuSCxvQkFBb0JxSCxTQUFwQixHQUFnQyxXQUFoQzs7a0JBRWVySCxtQiIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRnVsbFNpemVDYW52YXNWaWRlbyB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgbGV0IF8gPSB0aGlzO1xyXG5cclxuICAgIF8ub3B0aW9uID0ge1xyXG4gICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgIHZpZGVvQ2xhc3M6ICd2aWRlbycsXHJcbiAgICAgIGNhbnZhc0NsYXNzOiAnY2FudmFzJyxcclxuICAgICAgd2lkdGg6IDMyMCxcclxuICAgICAgaGVpZ2h0OiAyNDAsXHJcbiAgICAgIGFsaWduWDogJ2NlbnRlcicsXHJcbiAgICAgIGFsaWduWTogJ2NlbnRlcicsXHJcblxyXG4gICAgICBmcHM6IDMwLCAvLyBUT0RPIC0gY2hlY2tcclxuICAgICAgdmlkZW9Vcmw6ICcnLFxyXG4gICAgICBwb3N0ZXJVcmw6ICcnLFxyXG5cclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIG11dGVkOiBmYWxzZSxcclxuXHJcbiAgICAgIGNvbnRlbnRNb2RlOiBGdWxsU2l6ZUNhbnZhc1ZpZGVvLkFTUEVDVF9GSUxMLCAvLyBUT0RPIC0gYWRkIEFTUEVDVF9GSVRcclxuXHJcbiAgICAgIGNhbnBsYXlDYWxsYmFjazogbnVsbCxcclxuICAgICAgdGltZXVwZGF0ZUNhbGxiYWNrOiBudWxsLFxyXG4gICAgICBlbmRlZENhbGxiYWNrOiBudWxsLFxyXG5cclxuICAgICAgdmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrOiBudWxsXHJcbiAgICB9O1xyXG4gICAgJC5leHRlbmQoXy5vcHRpb24sIG9wdGlvbnMpO1xyXG5cclxuICAgIF8ucGFyZW50ID0gXy5vcHRpb24ucGFyZW50O1xyXG5cclxuICAgIGlmIChfLnBhcmVudC5sZW5ndGggPD0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Z1bGxTaXplQ2FudmFzVmlkZW8gQ2xhc3MgcmVxdWlyZSBvcHRpb25zIGhhdmUgcGFyZW50LicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgXy4kdmlkZW8gPSBudWxsO1xyXG4gICAgXy4kY2FudmFzID0gbnVsbDtcclxuXHJcbiAgICBfLnZpZGVvID0gbnVsbDtcclxuICAgIF8uY2FudmFzID0gbnVsbDtcclxuICAgIF8uY3R4ID0gbnVsbDtcclxuXHJcbiAgICBfLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgXy5sYXN0UmVuZGVyVGltZSA9IDA7XHJcbiAgICBfLmFuaW1hdGlvbkZyYW1lID0gbnVsbDtcclxuXHJcbiAgICBfLmdldFZpZGVvU2l6ZSA9IF8uZ2V0VmlkZW9Db250ZW50TW9kZUZ1bmMoXy5vcHRpb24uY29udGVudE1vZGUpO1xyXG4gICAgXy4kcHJveHlSZXNpemUgPSAkLnByb3h5KF8ucmVzaXplLCBfKTtcclxuICB9XHJcblxyXG4gIGluaXQob2JqKSB7XHJcbiAgICB0aGlzLnNldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLnNldENhbGxiYWNrcygpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5zdGFuY2UoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIF8uJHZpZGVvID0gJChfLmdldFZpZGVvVHBsKCkpLmNzcyh7cG9zaXRpb246ICdhYnNvbHV0ZSd9KTtcclxuICAgIF8uJGNhbnZhcyA9ICQoXy5nZXRDYW52YXNUcGwoKSkuY3NzKHtwb3NpdGlvbjogJ2Fic29sdXRlJ30pO1xyXG4gICAgXy5wYXJlbnQuYXBwZW5kKF8uJHZpZGVvKTtcclxuICAgIF8ucGFyZW50LmFwcGVuZChfLiRjYW52YXMpO1xyXG5cclxuICAgIF8udmlkZW8gPSBfLiR2aWRlby5nZXQoMCk7XHJcbiAgICBfLmNhbnZhcyA9IF8uJGNhbnZhcy5nZXQoMCk7XHJcbiAgICBfLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgaWYgKG9wdC5sb29wID09PSB0cnVlKSBfLnZpZGVvLnNldEF0dHJpYnV0ZSgnbG9vcCcsICcnKTtcclxuICAgIGlmIChvcHQubXV0ZWQgPT09IHRydWUpIF8udmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTtcclxuICAgIGlmIChvcHQuYXV0b3BsYXkgPT09IHRydWUpIF8udmlkZW8uc2V0QXR0cmlidXRlKCdhdXRvcGxheScsICcnKTsgLy8gaU9TIHZpZGVvIG5vZGUgYWxyZWFkeSBoYXMgXCJhdXRvcGxheVwiIGF0dHJpYnV0ZVxyXG5cclxuICAgIGxldCBzaXplID0gXy5nZXRWaWRlb1NpemUoKTtcclxuICAgIF8uc2V0VmlkZW9TaXplKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcclxuICAgIF8uc2V0Q2FudmFzU2l6ZShzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XHJcbiAgICBfLnNldFdyYXBBbGlnbihvcHQuYWxpZ25YLCBvcHQuYWxpZ25ZLCBzaXplKTtcclxuXHJcbiAgICBpZiAoXy5pc0lPUygpKSB7XHJcbiAgICAgIF8uJHZpZGVvLmhpZGUoKTtcclxuXHJcbiAgICAgIF8ucGxheSgpO1xyXG4gICAgICBpZiAoIV8ub3B0aW9uLmF1dG9wbGF5KSBfLnBhdXNlKCk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy4kY2FudmFzLmhpZGUoKTtcclxuXHJcbiAgICAgIF8uJHZpZGVvLm9uKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICBfLnBsYXkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLiRwcm94eVJlc2l6ZSk7XHJcbiAgICBfLnJlc2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2FsbGJhY2tzKCkge1xyXG4gICAgbGV0IF8gPSB0aGlzLFxyXG4gICAgICBvcHQgPSBfLm9wdGlvbixcclxuICAgICAgaXNWaWRlb0hhc09uZW5kZWQgPSBfLnZpZGVvLmhhc093blByb3BlcnR5KCdvbmVuZGVkJyk7XHJcblxyXG4gICAgaWYgKF8uaXNJT1MoKSkge1xyXG4gICAgICBfLiR2aWRlby5vbignY2FucGxheScsIChldnQpID0+IHtcclxuICAgICAgICBfLmRyYXdWaWRlb1RvQ2FudmFzKCk7XHJcbiAgICAgICAgaWYgKG9wdC5jYW5wbGF5Q2FsbGJhY2spIHtcclxuICAgICAgICAgIG9wdC5jYW5wbGF5Q2FsbGJhY2suY2FsbChudWxsLCB7XHJcbiAgICAgICAgICAgIGV2ZW50OiBldnQsXHJcbiAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgXy4kdmlkZW8ub24oJ3RpbWV1cGRhdGUnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgXy5kcmF3VmlkZW9Ub0NhbnZhcygpO1xyXG5cclxuICAgICAgICBpZiAob3B0LnRpbWV1cGRhdGVDYWxsYmFjaykge1xyXG4gICAgICAgICAgb3B0LnRpbWV1cGRhdGVDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgZXZlbnQ6IGV2dCxcclxuICAgICAgICAgICAgdmlkZW86IF8udmlkZW8sXHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogXy52aWRlby5kdXJhdGlvblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfLiR2aWRlby5vbignY2FucGxheScsIChldnQpID0+IHtcclxuICAgICAgICBpZiAob3B0LmNhbnBsYXlDYWxsYmFjaykge1xyXG4gICAgICAgICAgb3B0LmNhbnBsYXlDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgZXZlbnQ6IGV2dCxcclxuICAgICAgICAgICAgdmlkZW86IF8udmlkZW9cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAob3B0LnRpbWV1cGRhdGVDYWxsYmFjayB8fCAoIWlzVmlkZW9IYXNPbmVuZGVkICYmIG9wdC5lbmRlZENhbGxiYWNrKSkge1xyXG4gICAgICAgIF8uJHZpZGVvLm9uKCd0aW1ldXBkYXRlJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgaWYgKG9wdC50aW1ldXBkYXRlQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgb3B0LnRpbWV1cGRhdGVDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgICBldmVudDogZXZ0LFxyXG4gICAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBfLnZpZGVvLmR1cmF0aW9uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChvcHQuZW5kZWRDYWxsYmFjayAmJiAoXy52aWRlby5jdXJyZW50VGltZSA+PSBfLnZpZGVvLmR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICBpZiAob3B0Lmxvb3AgPT09IHRydWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIF8uaXNQbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBvcHQuZW5kZWRDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgICBldmVudDogZXZ0LFxyXG4gICAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBfLnZpZGVvLmR1cmF0aW9uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNWaWRlb0hhc09uZW5kZWQgJiYgb3B0LmVuZGVkQ2FsbGJhY2spIHtcclxuICAgICAgICAvLyBUT0RPIC0gbm8gYnJvd3NlciBzdXBwb3J0ICdlbmRlZCcgZXZlbnQgbm93LlxyXG4gICAgICAgICQodmlkZW8pLm9uKCdlbmRlZCcsIChldnQpID0+IHtcclxuICAgICAgICAgIF8uaXNQbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgb3B0LmVuZGVkQ2FsbGJhY2suY2FsbChudWxsLCB7XHJcbiAgICAgICAgICAgIGV2ZW50OiBldnQsXHJcbiAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgICBjdXJyZW50VGltZTogXy52aWRlby5jdXJyZW50VGltZSxcclxuICAgICAgICAgICAgZHVyYXRpb246IF8udmlkZW8uZHVyYXRpb25cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdC52aXNpYmlsaXR5Y2hhbmdlQ2FsbGJhY2spIHtcclxuICAgICAgLy8gdG9kbyAtIGNoYW5nZSB0byB2ZW5kb3IgcHJlZml4IHV0aWwuXHJcbiAgICAgIGxldCBoaWRkZW4sIHZpc2liaWxpdHlTdGF0ZSwgdmlzaWJpbGl0eUNoYW5nZTtcclxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5oaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7IC8vIE9wZXJhIDEyLjEwIGFuZCBGaXJlZm94IDE4IGFuZCBsYXRlciBzdXBwb3J0XHJcbiAgICAgICAgaGlkZGVuID0gJ2hpZGRlbic7XHJcbiAgICAgICAgdmlzaWJpbGl0eVN0YXRlID0gJ3Zpc2liaWxpdHlTdGF0ZSc7XHJcbiAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9ICd2aXNpYmlsaXR5Y2hhbmdlJztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQubXNIaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaGlkZGVuID0gJ21zSGlkZGVuJztcclxuICAgICAgICB2aXNpYmlsaXR5U3RhdGUgPSAnbXNWaXNpYmlsaXR5U3RhdGUnO1xyXG4gICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnbXN2aXNpYmlsaXR5Y2hhbmdlJztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQud2Via2l0SGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGhpZGRlbiA9ICd3ZWJraXRIaWRkZW4nO1xyXG4gICAgICAgIHZpc2liaWxpdHlTdGF0ZSA9ICd3ZWJraXRWaXNpYmlsaXR5U3RhdGUnO1xyXG4gICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnd2Via2l0dmlzaWJpbGl0eWNoYW5nZSc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKHZpc2liaWxpdHlDaGFuZ2UsIChldnQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygndmlzaWJpbGl0eWNoYW5nZSA6JywgZXZ0KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGlkZGVuJywgZG9jdW1lbnRbaGlkZGVuXSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3Zpc2liaWxpdHlTdGF0ZScsIGRvY3VtZW50W3Zpc2liaWxpdHlTdGF0ZV0pOyAvLyB2aXNpYmxlLCBoaWRkZW4sIHByZXJlbmRlciwgdW5sb2FkZWRcclxuXHJcbiAgICAgICAgb3B0LnZpc2liaWxpdHljaGFuZ2VDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgIGV2ZW50OiBldnQsXHJcbiAgICAgICAgICB2aWRlbzogXy52aWRlbyxcclxuICAgICAgICAgIGRvY3VtZW50SGlkZGVuOiBkb2N1bWVudFtoaWRkZW5dLFxyXG4gICAgICAgICAgZG9jdW1lbnRWaXNpYmlsaXR5U3RhdGU6IGRvY3VtZW50W3Zpc2liaWxpdHlTdGF0ZV0gLy8gdmlzaWJsZSwgaGlkZGVuLCBwcmVyZW5kZXIsIHVubG9hZGVkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0V3JhcEFsaWduKGFsaWduWCwgYWxpZ25ZLCBtb2RpZmllZFNpemUpIHtcclxuICAgIGxldCB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICB3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICAgIGxlZnQgPSAwLFxyXG4gICAgICB0b3AgPSAwO1xyXG5cclxuICAgIHN3aXRjaCAoYWxpZ25YKSB7XHJcbiAgICAgIGNhc2UgJ2xlZnQnIDpcclxuICAgICAgICBsZWZ0ID0gMDtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ2NlbnRlcicgOlxyXG4gICAgICAgIGxlZnQgPSBNYXRoLnJvdW5kKCh3aW5XaWR0aCAtIG1vZGlmaWVkU2l6ZS53aWR0aCkgLyAyKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ3JpZ2h0JyA6XHJcbiAgICAgICAgbGVmdCA9IE1hdGgucm91bmQod2luV2lkdGggLSBtb2RpZmllZFNpemUud2lkdGgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAoYWxpZ25ZKSB7XHJcbiAgICAgIGNhc2UgJ3RvcCcgOlxyXG4gICAgICAgIHRvcCA9IDA7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdjZW50ZXInIDpcclxuICAgICAgICB0b3AgPSBNYXRoLnJvdW5kKCh3aW5IZWlnaHQgLSBtb2RpZmllZFNpemUuaGVpZ2h0KSAvIDIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnYm90dG9tJyA6XHJcbiAgICAgICAgdG9wID0gTWF0aC5yb3VuZCh3aW5IZWlnaHQgLSBtb2RpZmllZFNpemUuaGVpZ2h0KTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFZpZGVvUG9zaXRpb24oe2xlZnQ6IGxlZnQsIHRvcDogdG9wfSk7XHJcbiAgICB0aGlzLnNldENhbnZhc1Bvc2l0aW9uKHtsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pXHJcbiAgfVxyXG5cclxuICBzZXRWaWRlb1Bvc2l0aW9uKGNzc09iaikge1xyXG4gICAgdGhpcy4kdmlkZW8uY3NzKGNzc09iaik7XHJcbiAgfVxyXG5cclxuICBzZXRDYW52YXNQb3NpdGlvbihjc3NPYmopIHtcclxuICAgIHRoaXMuJGNhbnZhcy5jc3MoY3NzT2JqKTtcclxuICB9XHJcblxyXG4gIHNldFZpZGVvU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICB0aGlzLiR2aWRlby53aWR0aCh3aWR0aCk7XHJcbiAgICB0aGlzLiR2aWRlby5oZWlnaHQoaGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIHNldENhbnZhc1NpemUod2lkdGgsIGhlaWdodCkge1xyXG4gICAgbGV0IF8gPSB0aGlzO1xyXG5cclxuICAgIGlmIChfLmlzSU9TKCkpIHtcclxuICAgICAgXy5jdHguY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgIF8uY3R4LmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgIF8uJGNhbnZhcy5hdHRyKHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkcmF3VmlkZW9Ub0NhbnZhcygpIHtcclxuICAgIGxldCBfID0gdGhpcztcclxuICAgIF8uY3R4LmRyYXdJbWFnZShfLnZpZGVvLCAwLCAwLCBfLiR2aWRlby53aWR0aCgpLCBfLiR2aWRlby5oZWlnaHQoKSk7XHJcbiAgfVxyXG5cclxuICBsb29wQW5pbWF0aW9uRnJhbWVJT1MoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCBub3cgPSBEYXRlLm5vdygpLFxyXG4gICAgICBlbGFwc2VkVGltZSA9ICggbm93IC0gXy5sYXN0UmVuZGVyVGltZSApIC8gMTAwMDtcclxuXHJcbiAgICBpZiAoZWxhcHNlZFRpbWUgPj0gKDEgLyBfLm9wdGlvbi5mcHMpKSB7XHJcbiAgICAgIF8udmlkZW8uY3VycmVudFRpbWUgPSBfLnZpZGVvLmN1cnJlbnRUaW1lICsgZWxhcHNlZFRpbWU7XHJcbiAgICAgIF8ubGFzdFJlbmRlclRpbWUgPSBub3c7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKF8udmlkZW8uY3VycmVudFRpbWUgPj0gXy52aWRlby5kdXJhdGlvbikge1xyXG4gICAgICBfLmlzUGxheWluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKG9wdC5sb29wID09PSB0cnVlKSB7XHJcbiAgICAgICAgXy5zZWVrKDApO1xyXG4gICAgICAgIF8ucGxheSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9wdC5lbmRlZENhbGxiYWNrLmNhbGwobnVsbCwge1xyXG4gICAgICAgICAgZXZlbnQ6IG51bGwsXHJcbiAgICAgICAgICB2aWRlbzogXy52aWRlbyxcclxuICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgZHVyYXRpb246IF8udmlkZW8uZHVyYXRpb25cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgXy5zdG9wKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoXy5pc1BsYXlpbmcpIHtcclxuICAgICAgXy5hbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgXy5sb29wQW5pbWF0aW9uRnJhbWVJT1MoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShfLmFuaW1hdGlvbkZyYW1lKTtcclxuICAgICAgXy5hbmltYXRpb25GcmFtZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNpemUoZXZ0KSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIHNpemUgPSBfLmdldFZpZGVvU2l6ZSgpO1xyXG5cclxuICAgIF8uc2V0VmlkZW9TaXplKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcclxuICAgIF8uc2V0Q2FudmFzU2l6ZShzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XHJcbiAgICBfLnNldFdyYXBBbGlnbihfLm9wdGlvbi5hbGlnblgsIF8ub3B0aW9uLmFsaWduWSwgc2l6ZSk7XHJcblxyXG4gICAgaWYgKF8uaXNJT1MoKSkgXy5kcmF3VmlkZW9Ub0NhbnZhcygpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlkZW9UcGwoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCB2aWRlb1NvdXJjZVRwbCA9ICcnLFxyXG4gICAgICBleHQgPSBvcHQudmlkZW9Vcmwuc3BsaXQoJy4nKS5wb3AoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdmlkZW9Tb3VyY2VUcGwgKz0gYDxzb3VyY2Ugc3JjPVwiJHtvcHQudmlkZW9Vcmx9XCIgdHlwZT1cInZpZGVvLyR7ZXh0fVwiPjwvc291cmNlPmA7XHJcblxyXG4gICAgbGV0IHRwbCA9IGA8dmlkZW8gY2xhc3M9XCIke29wdC52aWRlb0NsYXNzfVwiIHBvc3Rlcj1cIiR7b3B0LnBvc3RlclVybH1cIj4ke3ZpZGVvU291cmNlVHBsfTwvdmlkZW8+YDtcclxuICAgIGlmIChfLmlzSU9TKCkpIHtcclxuICAgICAgdHBsID0gYDx2aWRlbyBjbGFzcz1cIiR7b3B0LnZpZGVvQ2xhc3N9XCIgcG9zdGVyPVwiJHtvcHQucG9zdGVyVXJsfVwiIGF1dG9wbGF5PiR7dmlkZW9Tb3VyY2VUcGx9PC92aWRlbz5gO1xyXG4gICAgfVxyXG4gICAgLy9sZXQgdHBsID0gYDx2aWRlbyBjbGFzcz1cIiR7b3B0LnZpZGVvQ2xhc3N9XCIgbXV0ZWQ9XCJ0cnVlXCIgbG9vcD1cInRydWVcIiBhdXRvcGxheT1cInRydWVcIiBwb3N0ZXI9XCJcIj4ke3ZpZGVvU291cmNlVHBsfTwvdmlkZW8+YDtcclxuXHJcbiAgICByZXR1cm4gdHBsO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FudmFzVHBsKCkge1xyXG4gICAgcmV0dXJuIGA8Y2FudmFzIGNsYXNzPVwiJHt0aGlzLm9wdGlvbi5jYW52YXNDbGFzc31cIj48L2NhbnZhcz5gO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlkZW9TaXplV2lkdGhGaXQoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICBtb2RpZmllZFNpemVXID0gd2luV2lkdGgsXHJcbiAgICAgIG1vZGlmaWVkU2l6ZUggPSBNYXRoLmNlaWwoKHdpbldpZHRoIC8gb3B0LndpZHRoKSAqIG9wdC5oZWlnaHQpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZHRoOiBtb2RpZmllZFNpemVXLFxyXG4gICAgICBoZWlnaHQ6IG1vZGlmaWVkU2l6ZUhcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFZpZGVvU2l6ZUFzcGVjdEZpbGwoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICB3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICAgIG1vZGlmaWVkU2l6ZVcgPSB3aW5XaWR0aCxcclxuICAgICAgbW9kaWZpZWRTaXplSCA9IE1hdGguY2VpbCgod2luV2lkdGggLyBvcHQud2lkdGgpICogb3B0LmhlaWdodCk7XHJcblxyXG4gICAgaWYgKG1vZGlmaWVkU2l6ZUggPCB3aW5IZWlnaHQpIHtcclxuICAgICAgbW9kaWZpZWRTaXplVyA9IE1hdGguY2VpbCgod2luSGVpZ2h0IC8gb3B0LmhlaWdodCkgKiBvcHQud2lkdGgpO1xyXG4gICAgICBtb2RpZmllZFNpemVIID0gd2luSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZHRoOiBtb2RpZmllZFNpemVXLFxyXG4gICAgICBoZWlnaHQ6IG1vZGlmaWVkU2l6ZUhcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRWaWRlb1NpemVBc3BlY3RGaXQoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICB3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICAgIG1vZGlmaWVkU2l6ZVcgPSAwLFxyXG4gICAgICBtb2RpZmllZFNpemVIID0gMDtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCcod2luV2lkdGggLyBvcHQud2lkdGgpIDonLCAod2luV2lkdGggLyBvcHQud2lkdGgpKTtcclxuICAgICAgY29uc29sZS5sb2coJyh3aW5IZWlnaHQgLyBvcHQuaGVpZ2h0KSA6JywgKHdpbkhlaWdodCAvIG9wdC5oZWlnaHQpKTtcclxuXHJcbiAgICAvLyBUT0RPIC0gQ0hBTkdFIGxvZ2ljLlxyXG4gICAgbGV0IHJhdGlvID0gTWF0aC5taW4oICh3aW5XaWR0aCAvIG9wdC53aWR0aCksICh3aW5IZWlnaHQgLyBvcHQuaGVpZ2h0KSApO1xyXG4gICAgbW9kaWZpZWRTaXplVyA9IE1hdGguY2VpbChvcHQud2lkdGggKiByYXRpbyk7XHJcbiAgICBtb2RpZmllZFNpemVIID0gTWF0aC5jZWlsKG9wdC5oZWlnaHQgKiByYXRpbyk7XHJcblxyXG4gICAgLypcclxuICAgIGlmKCAod2luV2lkdGggLyBvcHQud2lkdGgpIDwgKHdpbkhlaWdodCAvIG9wdC5oZWlnaHQpICkge1xyXG4gICAgICBtb2RpZmllZFNpemVXID0gd2luV2lkdGg7XHJcbiAgICAgIG1vZGlmaWVkU2l6ZUggPSBNYXRoLmNlaWwod2luSGVpZ2h0ICogKHdpbldpZHRoIC8gb3B0LndpZHRoKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtb2RpZmllZFNpemVXID0gTWF0aC5jZWlsKHdpbldpZHRoICogKHdpbkhlaWdodCAvIG9wdC5oZWlnaHQpKTtcclxuICAgICAgbW9kaWZpZWRTaXplSCA9IHdpbkhlaWdodDtcclxuICAgIH1cclxuICAgICovXHJcbiAgICBjb25zb2xlLmxvZygnbW9kaWZpZWRTaXplVyA6JywgbW9kaWZpZWRTaXplVyk7XHJcbiAgICBjb25zb2xlLmxvZygnbW9kaWZpZWRTaXplSCA6JywgbW9kaWZpZWRTaXplSCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IG1vZGlmaWVkU2l6ZVcsXHJcbiAgICAgIGhlaWdodDogbW9kaWZpZWRTaXplSFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldFZpZGVvQ29udGVudE1vZGVGdW5jKGNvbnRlbnRNb2RlKSB7XHJcbiAgICBsZXQgZnVuYyA9IG51bGw7XHJcblxyXG4gICAgc3dpdGNoKGNvbnRlbnRNb2RlKSB7XHJcbiAgICAgIGNhc2UgRnVsbFNpemVDYW52YXNWaWRlby5BU1BFQ1RfRklMTCA6IFxyXG4gICAgICAgIGZ1bmMgPSB0aGlzLmdldFZpZGVvU2l6ZUFzcGVjdEZpbGw7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlIEZ1bGxTaXplQ2FudmFzVmlkZW8uQVNQRUNUX0ZJVCA6XHJcbiAgICAgICAgZnVuYyA9IHRoaXMuZ2V0VmlkZW9TaXplQXNwZWN0Rml0O1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBGdWxsU2l6ZUNhbnZhc1ZpZGVvLldJRFRIX0ZJVCA6XHJcbiAgICAgICAgZnVuYyA9IHRoaXMuZ2V0VmlkZW9TaXplV2lkdGhGaXQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZ1bmM7XHJcbiAgfVxyXG5cclxuICBpc0lPUygpIHtcclxuICAgIHJldHVybiAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xyXG4gIH1cclxuXHJcbiAgcGxheSgpIHtcclxuICAgIGxldCBfID0gdGhpcztcclxuICAgIGlmICghXy52aWRlbykgcmV0dXJuO1xyXG5cclxuICAgIGlmIChfLmlzSU9TKCkpIHtcclxuICAgICAgXy5sYXN0UmVuZGVyVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIF8uaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgXy5sb29wQW5pbWF0aW9uRnJhbWVJT1MoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF8uaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgXy52aWRlby5wbGF5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYXVzZSgpIHtcclxuICAgIGxldCBfID0gdGhpcztcclxuICAgIGlmICghXy52aWRlbykgcmV0dXJuO1xyXG5cclxuICAgIGlmIChfLmlzSU9TKCkpIHtcclxuICAgICAgXy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF8uaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgIF8udmlkZW8ucGF1c2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0b3AoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXM7XHJcbiAgICBpZiAoIV8udmlkZW8pIHJldHVybjtcclxuXHJcbiAgICBpZiAoXy5pc0lPUygpKSB7XHJcbiAgICAgIF8ucGF1c2UoKTtcclxuICAgICAgXy5zZWVrKDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgXy52aWRlby5wYXVzZSgpO1xyXG4gICAgICBfLnZpZGVvLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlZWsoc2Vjb25kKSB7XHJcbiAgICBsZXQgXyA9IHRoaXM7XHJcbiAgICBpZiAoIV8udmlkZW8pIHJldHVybjtcclxuXHJcbiAgICBpZiAoXy5pc0lPUygpKSB7XHJcbiAgICAgIF8udmlkZW8uY3VycmVudFRpbWUgPSBzZWNvbmQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfLnZpZGVvLmN1cnJlbnRUaW1lID0gc2Vjb25kO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5GdWxsU2l6ZUNhbnZhc1ZpZGVvLkFTUEVDVF9GSUxMID0gJ0FTUEVDVF9GSUxMJztcclxuRnVsbFNpemVDYW52YXNWaWRlby5BU1BFQ1RfRklUID0gJ0FTUEVDVF9GSVQnO1xyXG5GdWxsU2l6ZUNhbnZhc1ZpZGVvLldJRFRIX0ZJVCA9ICdXSURUSF9GSVQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRnVsbFNpemVDYW52YXNWaWRlbztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3JjL2NvbXBvbmVudC9GdWxsU2l6ZUNhbnZhc1ZpZGVvLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");
}]);