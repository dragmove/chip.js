/**
 * @update : 2016-11-18 13:38:2
 */
!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){eval("'use strict';\n\nvar _FullSizeCanvasVideo = __webpack_require__(2);\n\nvar _FullSizeCanvasVideo2 = _interopRequireDefault(_FullSizeCanvasVideo);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function ($) {\n  \"use strict\";\n\n  $(document).ready(init);\n\n  function init() {\n    // testNavi();\n    // testNaviHasTimer();\n    // testImageLoader();\n    // testFullSizeBg();\n    // testOverlay();\n    // testFullSizeVideo();\n    testFullSizeCanvasVideo();\n  }\n\n  function testFullSizeCanvasVideo() {\n    var canvasVideo = new _FullSizeCanvasVideo2.default({\n      parent: $('.canvas-video'),\n      videoClass: 'video',\n      canvasClass: 'canvas',\n\n      autoplay: true,\n      loop: true,\n      muted: false,\n\n      width: 960,\n      height: 540,\n      alignX: 'center',\n      alignY: 'center',\n\n      fps: 30,\n      videoUrl: 'http://akvod.plaync.com/RK/MOVIES/PREREGISTER3/960x540.mp4',\n      posterUrl: './img/poster.jpg',\n\n      contentMode: _FullSizeCanvasVideo2.default.ASPECT_FIT,\n\n      canplayCallback: function canplayCallback(obj) {\n        // iOS, Adr v\n        console.log('external canplayCallback() obj :', obj);\n      },\n\n      timeupdateCallback: function timeupdateCallback(obj) {// iOS, Adr v\n        //console.log('external timeupdateCallback() obj :', obj);\n      },\n\n      endedCallback: function endedCallback(obj) {\n        // iOS, Adr v\n        console.log('external endedCallback() obj :', obj);\n      },\n\n      visibilitychangeCallback: function visibilitychangeCallback(obj) {\n        console.log('extenal visibilitychangeCallback() obj :', obj);\n\n        if (obj.documentHidden) {\n          canvasVideo.pause();\n        } else {\n          canvasVideo.play();\n        }\n      }\n    });\n    canvasVideo.init();\n\n    $(window).on('resize', function (evt) {\n      console.log('main.js - resize. window.innerWidth, window.innerHeight :', window.innerWidth, window.innerHeight);\n\n      $('.canvas-video').css({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n\n      $('#wrapper').css({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    }).trigger('resize');\n\n    // test btns\n    $('#btn-play').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.play();\n    });\n\n    $('#btn-pause').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.pause();\n    });\n\n    $('#btn-stop').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.stop();\n    });\n\n    $('#btn-seek').on('click', function (evt) {\n      evt.preventDefault();\n      canvasVideo.seek(30);\n    });\n  }\n})(jQuery); // import Navi from './component/Navi';\n// import NaviHasTimer from './component/NaviHasTimer';\n// import ImageLoader from './component/ImageLoader';\n// import FullSizeBg from './component/FullSizeBg';\n// import Overlay from './component/Overlay';\n// import FullSizeVideo from './component/FullSizeVideo';//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL21haW4uanM/MTdmNiJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImluaXQiLCJ0ZXN0RnVsbFNpemVDYW52YXNWaWRlbyIsImNhbnZhc1ZpZGVvIiwicGFyZW50IiwidmlkZW9DbGFzcyIsImNhbnZhc0NsYXNzIiwiYXV0b3BsYXkiLCJsb29wIiwibXV0ZWQiLCJ3aWR0aCIsImhlaWdodCIsImFsaWduWCIsImFsaWduWSIsImZwcyIsInZpZGVvVXJsIiwicG9zdGVyVXJsIiwiY29udGVudE1vZGUiLCJBU1BFQ1RfRklUIiwiY2FucGxheUNhbGxiYWNrIiwib2JqIiwiY29uc29sZSIsImxvZyIsInRpbWV1cGRhdGVDYWxsYmFjayIsImVuZGVkQ2FsbGJhY2siLCJ2aXNpYmlsaXR5Y2hhbmdlQ2FsbGJhY2siLCJkb2N1bWVudEhpZGRlbiIsInBhdXNlIiwicGxheSIsIndpbmRvdyIsIm9uIiwiZXZ0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiY3NzIiwidHJpZ2dlciIsInByZXZlbnREZWZhdWx0Iiwic3RvcCIsInNlZWsiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI7O0FBTUE7Ozs7OztBQUVDLFdBQVNBLENBQVQsRUFBWTtBQUNYOztBQUNBQSxJQUFFQyxRQUFGLEVBQVlDLEtBQVosQ0FBa0JDLElBQWxCOztBQUVBLFdBQVNBLElBQVQsR0FBZ0I7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUM7QUFDRDs7QUFFRCxXQUFTQSx1QkFBVCxHQUFtQztBQUNqQyxRQUFJQyxjQUFjLGtDQUF3QjtBQUN4Q0MsY0FBUU4sRUFBRSxlQUFGLENBRGdDO0FBRXhDTyxrQkFBWSxPQUY0QjtBQUd4Q0MsbUJBQWEsUUFIMkI7O0FBS3hDQyxnQkFBVSxJQUw4QjtBQU14Q0MsWUFBTSxJQU5rQztBQU94Q0MsYUFBTyxLQVBpQzs7QUFTeENDLGFBQU8sR0FUaUM7QUFVeENDLGNBQVEsR0FWZ0M7QUFXeENDLGNBQVEsUUFYZ0M7QUFZeENDLGNBQVEsUUFaZ0M7O0FBY3hDQyxXQUFLLEVBZG1DO0FBZXhDQyxnQkFBVSw0REFmOEI7QUFnQnhDQyxpQkFBVyxrQkFoQjZCOztBQWtCeENDLG1CQUFhLDhCQUFvQkMsVUFsQk87O0FBb0J4Q0MsdUJBQWlCLHlCQUFDQyxHQUFELEVBQVM7QUFBRTtBQUMxQkMsZ0JBQVFDLEdBQVIsQ0FBWSxrQ0FBWixFQUFnREYsR0FBaEQ7QUFDRCxPQXRCdUM7O0FBd0J4Q0csMEJBQW9CLDRCQUFDSCxHQUFELEVBQVMsQ0FBRTtBQUM3QjtBQUNELE9BMUJ1Qzs7QUE0QnhDSSxxQkFBZSx1QkFBQ0osR0FBRCxFQUFTO0FBQUU7QUFDeEJDLGdCQUFRQyxHQUFSLENBQVksZ0NBQVosRUFBOENGLEdBQTlDO0FBQ0QsT0E5QnVDOztBQWdDeENLLGdDQUEwQixrQ0FBQ0wsR0FBRCxFQUFTO0FBQ2pDQyxnQkFBUUMsR0FBUixDQUFZLDBDQUFaLEVBQXdERixHQUF4RDs7QUFFQSxZQUFHQSxJQUFJTSxjQUFQLEVBQXVCO0FBQ3JCdkIsc0JBQVl3QixLQUFaO0FBQ0QsU0FGRCxNQUVPO0FBQ0x4QixzQkFBWXlCLElBQVo7QUFDRDtBQUNGO0FBeEN1QyxLQUF4QixDQUFsQjtBQTBDQXpCLGdCQUFZRixJQUFaOztBQUVBSCxNQUFFK0IsTUFBRixFQUFVQyxFQUFWLENBQWEsUUFBYixFQUF1QixVQUFTQyxHQUFULEVBQWM7QUFDbkNWLGNBQVFDLEdBQVIsQ0FBWSwyREFBWixFQUF5RU8sT0FBT0csVUFBaEYsRUFBNEZILE9BQU9JLFdBQW5HOztBQUVBbkMsUUFBRSxlQUFGLEVBQW1Cb0MsR0FBbkIsQ0FBdUI7QUFDckJ4QixlQUFPbUIsT0FBT0csVUFETztBQUVyQnJCLGdCQUFRa0IsT0FBT0k7QUFGTSxPQUF2Qjs7QUFLQW5DLFFBQUUsVUFBRixFQUFjb0MsR0FBZCxDQUFrQjtBQUNoQnhCLGVBQU9tQixPQUFPRyxVQURFO0FBRWhCckIsZ0JBQVFrQixPQUFPSTtBQUZDLE9BQWxCO0FBSUQsS0FaRCxFQVlHRSxPQVpILENBWVcsUUFaWDs7QUFjQTtBQUNBckMsTUFBRSxXQUFGLEVBQWVnQyxFQUFmLENBQWtCLE9BQWxCLEVBQTJCLFVBQVNDLEdBQVQsRUFBYztBQUN2Q0EsVUFBSUssY0FBSjtBQUNBakMsa0JBQVl5QixJQUFaO0FBQ0QsS0FIRDs7QUFLQTlCLE1BQUUsWUFBRixFQUFnQmdDLEVBQWhCLENBQW1CLE9BQW5CLEVBQTRCLFVBQVNDLEdBQVQsRUFBYztBQUN4Q0EsVUFBSUssY0FBSjtBQUNBakMsa0JBQVl3QixLQUFaO0FBQ0QsS0FIRDs7QUFLQTdCLE1BQUUsV0FBRixFQUFlZ0MsRUFBZixDQUFrQixPQUFsQixFQUEyQixVQUFTQyxHQUFULEVBQWM7QUFDdkNBLFVBQUlLLGNBQUo7QUFDQWpDLGtCQUFZa0MsSUFBWjtBQUNELEtBSEQ7O0FBS0F2QyxNQUFFLFdBQUYsRUFBZWdDLEVBQWYsQ0FBa0IsT0FBbEIsRUFBMkIsVUFBU0MsR0FBVCxFQUFjO0FBQ3ZDQSxVQUFJSyxjQUFKO0FBQ0FqQyxrQkFBWW1DLElBQVosQ0FBaUIsRUFBakI7QUFDRCxLQUhEO0FBSUQ7QUFDRixDQTlGQSxFQThGQ0MsTUE5RkQsQ0FBRCxDLENBUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgTmF2aSBmcm9tICcuL2NvbXBvbmVudC9OYXZpJztcclxuLy8gaW1wb3J0IE5hdmlIYXNUaW1lciBmcm9tICcuL2NvbXBvbmVudC9OYXZpSGFzVGltZXInO1xyXG4vLyBpbXBvcnQgSW1hZ2VMb2FkZXIgZnJvbSAnLi9jb21wb25lbnQvSW1hZ2VMb2FkZXInO1xyXG4vLyBpbXBvcnQgRnVsbFNpemVCZyBmcm9tICcuL2NvbXBvbmVudC9GdWxsU2l6ZUJnJztcclxuLy8gaW1wb3J0IE92ZXJsYXkgZnJvbSAnLi9jb21wb25lbnQvT3ZlcmxheSc7XHJcbi8vIGltcG9ydCBGdWxsU2l6ZVZpZGVvIGZyb20gJy4vY29tcG9uZW50L0Z1bGxTaXplVmlkZW8nO1xyXG5pbXBvcnQgRnVsbFNpemVDYW52YXNWaWRlbyBmcm9tICcuL2NvbXBvbmVudC9GdWxsU2l6ZUNhbnZhc1ZpZGVvJztcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgJChkb2N1bWVudCkucmVhZHkoaW5pdCk7XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAvLyB0ZXN0TmF2aSgpO1xyXG4gICAgLy8gdGVzdE5hdmlIYXNUaW1lcigpO1xyXG4gICAgLy8gdGVzdEltYWdlTG9hZGVyKCk7XHJcbiAgICAvLyB0ZXN0RnVsbFNpemVCZygpO1xyXG4gICAgLy8gdGVzdE92ZXJsYXkoKTtcclxuICAgIC8vIHRlc3RGdWxsU2l6ZVZpZGVvKCk7XHJcbiAgICB0ZXN0RnVsbFNpemVDYW52YXNWaWRlbygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdGVzdEZ1bGxTaXplQ2FudmFzVmlkZW8oKSB7XHJcbiAgICBsZXQgY2FudmFzVmlkZW8gPSBuZXcgRnVsbFNpemVDYW52YXNWaWRlbyh7XHJcbiAgICAgIHBhcmVudDogJCgnLmNhbnZhcy12aWRlbycpLFxyXG4gICAgICB2aWRlb0NsYXNzOiAndmlkZW8nLFxyXG4gICAgICBjYW52YXNDbGFzczogJ2NhbnZhcycsXHJcblxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgbXV0ZWQ6IGZhbHNlLFxyXG5cclxuICAgICAgd2lkdGg6IDk2MCxcclxuICAgICAgaGVpZ2h0OiA1NDAsXHJcbiAgICAgIGFsaWduWDogJ2NlbnRlcicsXHJcbiAgICAgIGFsaWduWTogJ2NlbnRlcicsXHJcblxyXG4gICAgICBmcHM6IDMwLFxyXG4gICAgICB2aWRlb1VybDogJ2h0dHA6Ly9ha3ZvZC5wbGF5bmMuY29tL1JLL01PVklFUy9QUkVSRUdJU1RFUjMvOTYweDU0MC5tcDQnLFxyXG4gICAgICBwb3N0ZXJVcmw6ICcuL2ltZy9wb3N0ZXIuanBnJyxcclxuXHJcbiAgICAgIGNvbnRlbnRNb2RlOiBGdWxsU2l6ZUNhbnZhc1ZpZGVvLkFTUEVDVF9GSVQsXHJcblxyXG4gICAgICBjYW5wbGF5Q2FsbGJhY2s6IChvYmopID0+IHsgLy8gaU9TLCBBZHIgdlxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdleHRlcm5hbCBjYW5wbGF5Q2FsbGJhY2soKSBvYmogOicsIG9iaik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB0aW1ldXBkYXRlQ2FsbGJhY2s6IChvYmopID0+IHsgLy8gaU9TLCBBZHIgdlxyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2V4dGVybmFsIHRpbWV1cGRhdGVDYWxsYmFjaygpIG9iaiA6Jywgb2JqKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVuZGVkQ2FsbGJhY2s6IChvYmopID0+IHsgLy8gaU9TLCBBZHIgdlxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdleHRlcm5hbCBlbmRlZENhbGxiYWNrKCkgb2JqIDonLCBvYmopO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrOiAob2JqKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2V4dGVuYWwgdmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrKCkgb2JqIDonLCBvYmopO1xyXG5cclxuICAgICAgICBpZihvYmouZG9jdW1lbnRIaWRkZW4pIHtcclxuICAgICAgICAgIGNhbnZhc1ZpZGVvLnBhdXNlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNhbnZhc1ZpZGVvLnBsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY2FudmFzVmlkZW8uaW5pdCgpO1xyXG5cclxuICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdtYWluLmpzIC0gcmVzaXplLiB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IDonLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuXHJcbiAgICAgICQoJy5jYW52YXMtdmlkZW8nKS5jc3Moe1xyXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICQoJyN3cmFwcGVyJykuY3NzKHtcclxuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgfSk7XHJcbiAgICB9KS50cmlnZ2VyKCdyZXNpemUnKTtcclxuXHJcbiAgICAvLyB0ZXN0IGJ0bnNcclxuICAgICQoJyNidG4tcGxheScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2FudmFzVmlkZW8ucGxheSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2J0bi1wYXVzZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2FudmFzVmlkZW8ucGF1c2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNidG4tc3RvcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2FudmFzVmlkZW8uc3RvcCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2J0bi1zZWVrJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjYW52YXNWaWRlby5zZWVrKDMwKTtcclxuICAgIH0pO1xyXG4gIH1cclxufShqUXVlcnkpKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc3JjL21haW4uanMiXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FullSizeCanvasVideo = function () {\n  function FullSizeCanvasVideo(options) {\n    _classCallCheck(this, FullSizeCanvasVideo);\n\n    var _ = this;\n\n    _.option = {\n      parent: null,\n      videoClass: 'video',\n      canvasClass: 'canvas',\n      width: 320,\n      height: 240,\n      alignX: 'center',\n      alignY: 'center',\n\n      fps: 60,\n      videoUrl: '',\n      posterUrl: '',\n\n      autoplay: true,\n      loop: true,\n      muted: false,\n\n      contentMode: FullSizeCanvasVideo.ASPECT_FILL, // FullSizeCanvasVideo.ASPECT_FILL, FullSizeCanvasVideo.ASPECT_FIT, FullSizeCanvasVideo.WIDTH_FIT\n\n      canplayCallback: null,\n      timeupdateCallback: null,\n      endedCallback: null,\n\n      visibilitychangeCallback: null\n    };\n    $.extend(_.option, options);\n\n    _.parent = _.option.parent;\n\n    if (_.parent.length <= 0) {\n      throw new Error('FullSizeCanvasVideo Class require options have parent.');\n      return;\n    }\n\n    _.$video = null;\n    _.$canvas = null;\n\n    _.video = null;\n    _.canvas = null;\n    _.ctx = null;\n\n    _.isPlaying = false;\n    _.lastRenderTime = 0;\n    _.animationFrame = null;\n\n    _.getVideoSize = _.getVideoContentModeFunc(_.option.contentMode);\n    _.$proxyResize = $.proxy(_.resize, _);\n  }\n\n  _createClass(FullSizeCanvasVideo, [{\n    key: 'init',\n    value: function init(obj) {\n      this.setInstance();\n      this.setCallbacks();\n    }\n  }, {\n    key: 'setInstance',\n    value: function setInstance() {\n      var _ = this,\n          opt = _.option;\n\n      _.$video = $(_.getVideoTpl()).css({ position: 'absolute' });\n      _.$canvas = $(_.getCanvasTpl()).css({ position: 'absolute' });\n      _.parent.append(_.$video);\n      _.parent.append(_.$canvas);\n\n      _.video = _.$video.get(0);\n      _.canvas = _.$canvas.get(0);\n      _.ctx = this.canvas.getContext('2d');\n\n      if (opt.loop === true) _.video.setAttribute('loop', '');\n      if (opt.muted === true) _.video.setAttribute('muted', '');\n      if (opt.autoplay === true) _.video.setAttribute('autoplay', ''); // iOS video node already has \"autoplay\" attribute\n\n      var size = _.getVideoSize();\n      _.setVideoSize(size.width, size.height);\n      _.setCanvasSize(size.width, size.height);\n      _.setWrapAlign(opt.alignX, opt.alignY, size);\n\n      if (_.isIOS()) {\n        _.$video.hide();\n\n        _.play();\n        if (!_.option.autoplay) _.pause();\n      } else {\n        this.$canvas.hide();\n\n        _.$video.on('click', function (evt) {\n          _.play();\n        });\n      }\n\n      $(window).on('resize', _.$proxyResize);\n      _.resize();\n    }\n  }, {\n    key: 'setCallbacks',\n    value: function setCallbacks() {\n      var _ = this,\n          opt = _.option,\n          isVideoHasOnended = _.video.hasOwnProperty('onended');\n\n      if (_.isIOS()) {\n        _.$video.on('canplay', function (evt) {\n          _.drawVideoToCanvas();\n          if (opt.canplayCallback) {\n            opt.canplayCallback.call(null, {\n              event: evt,\n              video: _.video\n            });\n          }\n        });\n\n        _.$video.on('timeupdate', function (evt) {\n          _.drawVideoToCanvas();\n\n          if (opt.timeupdateCallback) {\n            opt.timeupdateCallback.call(null, {\n              event: evt,\n              video: _.video,\n              currentTime: _.video.currentTime,\n              duration: _.video.duration\n            });\n          }\n        });\n      } else {\n        _.$video.on('canplay', function (evt) {\n          if (opt.canplayCallback) {\n            opt.canplayCallback.call(null, {\n              event: evt,\n              video: _.video\n            });\n          }\n        });\n\n        if (opt.timeupdateCallback || !isVideoHasOnended && opt.endedCallback) {\n          _.$video.on('timeupdate', function (evt) {\n            if (opt.timeupdateCallback) {\n              opt.timeupdateCallback.call(null, {\n                event: evt,\n                video: _.video,\n                currentTime: _.video.currentTime,\n                duration: _.video.duration\n              });\n            }\n\n            if (opt.endedCallback && _.video.currentTime >= _.video.duration) {\n              if (opt.loop === true) return;\n\n              _.isPlaying = false;\n\n              opt.endedCallback.call(null, {\n                event: evt,\n                video: _.video,\n                currentTime: _.video.currentTime,\n                duration: _.video.duration\n              });\n            }\n          });\n        }\n\n        if (isVideoHasOnended && opt.endedCallback) {\n          // TODO - no browser support 'ended' event now. 2016.11.15\n          $(video).on('ended', function (evt) {\n            _.isPlaying = false;\n\n            opt.endedCallback.call(null, {\n              event: evt,\n              video: _.video,\n              currentTime: _.video.currentTime,\n              duration: _.video.duration\n            });\n          });\n        }\n      }\n\n      if (opt.visibilitychangeCallback) {\n        (function () {\n          var hidden = void 0,\n              visibilityState = void 0,\n              visibilityChange = void 0;\n\n          if (typeof document.hidden !== 'undefined') {\n            // Opera 12.10 and Firefox 18 and later support\n            hidden = 'hidden';\n            visibilityState = 'visibilityState';\n            visibilityChange = 'visibilitychange';\n          } else if (typeof document.webkitHidden !== 'undefined') {\n            hidden = 'webkitHidden';\n            visibilityState = 'webkitVisibilityState';\n            visibilityChange = 'webkitvisibilitychange';\n          } else if (typeof document.mozHidden !== 'undefined') {\n            hidden = 'mozHidden';\n            visibilityState = 'mozVisibilityState';\n            visibilityChange = 'mozvisibilitychange';\n          } else if (typeof document.msHidden !== 'undefined') {\n            hidden = 'msHidden';\n            visibilityState = 'msVisibilityState';\n            visibilityChange = 'msvisibilitychange';\n          } else if (typeof document.oHidden !== 'undefined') {\n            hidden = 'oHidden';\n            visibilityState = 'oVisibilityState';\n            visibilityChange = 'ovisibilitychange';\n          }\n\n          $(document).on(visibilityChange, function (evt) {\n            opt.visibilitychangeCallback.call(null, {\n              event: evt,\n              video: _.video,\n              documentHidden: document[hidden],\n              documentVisibilityState: document[visibilityState] // visible, hidden, prerender, unloaded\n            });\n          });\n        })();\n      }\n    }\n  }, {\n    key: 'setWrapAlign',\n    value: function setWrapAlign(alignX, alignY, modifiedSize) {\n      var winWidth = window.innerWidth,\n          winHeight = window.innerHeight,\n          left = 0,\n          top = 0;\n\n      switch (alignX) {\n        case 'left':\n          left = 0;\n          break;\n\n        case 'center':\n          left = Math.round((winWidth - modifiedSize.width) / 2);\n          break;\n\n        case 'right':\n          left = Math.round(winWidth - modifiedSize.width);\n          break;\n      }\n\n      switch (alignY) {\n        case 'top':\n          top = 0;\n          break;\n\n        case 'center':\n          top = Math.round((winHeight - modifiedSize.height) / 2);\n          break;\n\n        case 'bottom':\n          top = Math.round(winHeight - modifiedSize.height);\n          break;\n      }\n\n      this.setVideoPosition({ left: left, top: top });\n      this.setCanvasPosition({ left: left, top: top });\n    }\n  }, {\n    key: 'setVideoPosition',\n    value: function setVideoPosition(cssObj) {\n      this.$video.css(cssObj);\n    }\n  }, {\n    key: 'setCanvasPosition',\n    value: function setCanvasPosition(cssObj) {\n      this.$canvas.css(cssObj);\n    }\n  }, {\n    key: 'setVideoSize',\n    value: function setVideoSize(width, height) {\n      this.$video.width(width);\n      this.$video.height(height);\n    }\n  }, {\n    key: 'setCanvasSize',\n    value: function setCanvasSize(width, height) {\n      var _ = this;\n\n      if (_.isIOS()) {\n        _.ctx.canvas.width = width;\n        _.ctx.canvas.height = height;\n        _.$canvas.attr({ width: width, height: height });\n      }\n    }\n  }, {\n    key: 'drawVideoToCanvas',\n    value: function drawVideoToCanvas() {\n      var _ = this;\n      _.ctx.drawImage(_.video, 0, 0, _.$video.width(), _.$video.height());\n    }\n  }, {\n    key: 'loopAnimationFrameIOS',\n    value: function loopAnimationFrameIOS() {\n      var _ = this,\n          opt = _.option;\n\n      var now = Date.now(),\n          elapsedTime = (now - _.lastRenderTime) / 1000;\n\n      if (elapsedTime >= 1 / _.option.fps) {\n        _.video.currentTime = _.video.currentTime + elapsedTime;\n        _.lastRenderTime = now;\n      }\n\n      if (_.video.currentTime >= _.video.duration) {\n        _.isPlaying = false;\n\n        if (opt.loop === true) {\n          _.seek(0);\n          _.play();\n        } else {\n          opt.endedCallback.call(null, {\n            event: null,\n            video: _.video,\n            currentTime: _.video.currentTime,\n            duration: _.video.duration\n          });\n\n          _.stop();\n        }\n      }\n\n      if (_.isPlaying) {\n        _.animationFrame = requestAnimationFrame(function () {\n          _.loopAnimationFrameIOS();\n        });\n      } else {\n        cancelAnimationFrame(_.animationFrame);\n        _.animationFrame = null;\n      }\n    }\n  }, {\n    key: 'resize',\n    value: function resize(evt) {\n      var _ = this,\n          size = _.getVideoSize();\n\n      _.setVideoSize(size.width, size.height);\n      _.setCanvasSize(size.width, size.height);\n      _.setWrapAlign(_.option.alignX, _.option.alignY, size);\n\n      if (_.isIOS()) _.drawVideoToCanvas();\n    }\n  }, {\n    key: 'getVideoTpl',\n    value: function getVideoTpl() {\n      var _ = this,\n          opt = _.option;\n\n      var videoSourceTpl = '',\n          ext = opt.videoUrl.split('.').pop().toLowerCase();\n      videoSourceTpl += '<source src=\"' + opt.videoUrl + '\" type=\"video/' + ext + '\"></source>';\n\n      var tpl = '<video class=\"' + opt.videoClass + '\" poster=\"' + opt.posterUrl + '\">' + videoSourceTpl + '</video>';\n      if (_.isIOS()) {\n        tpl = '<video class=\"' + opt.videoClass + '\" poster=\"' + opt.posterUrl + '\" autoplay>' + videoSourceTpl + '</video>';\n      }\n\n      return tpl;\n    }\n  }, {\n    key: 'getCanvasTpl',\n    value: function getCanvasTpl() {\n      return '<canvas class=\"' + this.option.canvasClass + '\"></canvas>';\n    }\n  }, {\n    key: 'getVideoSizeAspectFill',\n    value: function getVideoSizeAspectFill() {\n      var _ = this,\n          opt = _.option;\n\n      var winWidth = window.innerWidth,\n          winHeight = window.innerHeight,\n          modifiedSizeW = winWidth,\n          modifiedSizeH = Math.ceil(winWidth / opt.width * opt.height);\n\n      if (modifiedSizeH < winHeight) {\n        modifiedSizeW = Math.ceil(winHeight / opt.height * opt.width);\n        modifiedSizeH = winHeight;\n      }\n\n      return {\n        width: modifiedSizeW,\n        height: modifiedSizeH\n      };\n    }\n  }, {\n    key: 'getVideoSizeAspectFit',\n    value: function getVideoSizeAspectFit() {\n      var _ = this,\n          opt = _.option;\n\n      var ratio = Math.min(window.innerWidth / opt.width, window.innerHeight / opt.height);\n      var modifiedSizeW = Math.ceil(opt.width * ratio),\n          modifiedSizeH = Math.ceil(opt.height * ratio);\n\n      return {\n        width: modifiedSizeW,\n        height: modifiedSizeH\n      };\n    }\n  }, {\n    key: 'getVideoSizeWidthFit',\n    value: function getVideoSizeWidthFit() {\n      var _ = this,\n          opt = _.option;\n\n      var winWidth = window.innerWidth,\n          modifiedSizeW = winWidth,\n          modifiedSizeH = Math.ceil(winWidth / opt.width * opt.height);\n\n      return {\n        width: modifiedSizeW,\n        height: modifiedSizeH\n      };\n    }\n  }, {\n    key: 'getVideoContentModeFunc',\n    value: function getVideoContentModeFunc(contentMode) {\n      var func = null;\n\n      switch (contentMode) {\n        case FullSizeCanvasVideo.ASPECT_FILL:\n          func = this.getVideoSizeAspectFill;\n          break;\n\n        case FullSizeCanvasVideo.ASPECT_FIT:\n          func = this.getVideoSizeAspectFit;\n          break;\n\n        case FullSizeCanvasVideo.WIDTH_FIT:\n          func = this.getVideoSizeWidthFit;\n          break;\n      }\n\n      return func;\n    }\n  }, {\n    key: 'isIOS',\n    value: function isIOS() {\n      return (/iPad|iPhone|iPod/.test(navigator.platform)\n      );\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.lastRenderTime = Date.now();\n        _.isPlaying = true;\n        _.loopAnimationFrameIOS();\n      } else {\n        _.isPlaying = true;\n        _.video.play();\n      }\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.isPlaying = false;\n      } else {\n        _.isPlaying = false;\n        _.video.pause();\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.pause();\n        _.seek(0);\n      } else {\n        _.video.pause();\n        _.video.currentTime = 0;\n      }\n    }\n  }, {\n    key: 'seek',\n    value: function seek(second) {\n      var _ = this;\n      if (!_.video) return;\n\n      if (_.isIOS()) {\n        _.video.currentTime = second;\n      } else {\n        _.video.currentTime = second;\n      }\n    }\n  }]);\n\n  return FullSizeCanvasVideo;\n}();\n\nFullSizeCanvasVideo.ASPECT_FILL = 'ASPECT_FILL';\nFullSizeCanvasVideo.ASPECT_FIT = 'ASPECT_FIT';\nFullSizeCanvasVideo.WIDTH_FIT = 'WIDTH_FIT';\n\nexports.default = FullSizeCanvasVideo;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2NvbXBvbmVudC9GdWxsU2l6ZUNhbnZhc1ZpZGVvLmpzPzU2NDMiXSwibmFtZXMiOlsiRnVsbFNpemVDYW52YXNWaWRlbyIsIm9wdGlvbnMiLCJfIiwib3B0aW9uIiwicGFyZW50IiwidmlkZW9DbGFzcyIsImNhbnZhc0NsYXNzIiwid2lkdGgiLCJoZWlnaHQiLCJhbGlnblgiLCJhbGlnblkiLCJmcHMiLCJ2aWRlb1VybCIsInBvc3RlclVybCIsImF1dG9wbGF5IiwibG9vcCIsIm11dGVkIiwiY29udGVudE1vZGUiLCJBU1BFQ1RfRklMTCIsImNhbnBsYXlDYWxsYmFjayIsInRpbWV1cGRhdGVDYWxsYmFjayIsImVuZGVkQ2FsbGJhY2siLCJ2aXNpYmlsaXR5Y2hhbmdlQ2FsbGJhY2siLCIkIiwiZXh0ZW5kIiwibGVuZ3RoIiwiRXJyb3IiLCIkdmlkZW8iLCIkY2FudmFzIiwidmlkZW8iLCJjYW52YXMiLCJjdHgiLCJpc1BsYXlpbmciLCJsYXN0UmVuZGVyVGltZSIsImFuaW1hdGlvbkZyYW1lIiwiZ2V0VmlkZW9TaXplIiwiZ2V0VmlkZW9Db250ZW50TW9kZUZ1bmMiLCIkcHJveHlSZXNpemUiLCJwcm94eSIsInJlc2l6ZSIsIm9iaiIsInNldEluc3RhbmNlIiwic2V0Q2FsbGJhY2tzIiwib3B0IiwiZ2V0VmlkZW9UcGwiLCJjc3MiLCJwb3NpdGlvbiIsImdldENhbnZhc1RwbCIsImFwcGVuZCIsImdldCIsImdldENvbnRleHQiLCJzZXRBdHRyaWJ1dGUiLCJzaXplIiwic2V0VmlkZW9TaXplIiwic2V0Q2FudmFzU2l6ZSIsInNldFdyYXBBbGlnbiIsImlzSU9TIiwiaGlkZSIsInBsYXkiLCJwYXVzZSIsIm9uIiwiZXZ0Iiwid2luZG93IiwiaXNWaWRlb0hhc09uZW5kZWQiLCJoYXNPd25Qcm9wZXJ0eSIsImRyYXdWaWRlb1RvQ2FudmFzIiwiY2FsbCIsImV2ZW50IiwiY3VycmVudFRpbWUiLCJkdXJhdGlvbiIsImhpZGRlbiIsInZpc2liaWxpdHlTdGF0ZSIsInZpc2liaWxpdHlDaGFuZ2UiLCJkb2N1bWVudCIsIndlYmtpdEhpZGRlbiIsIm1vekhpZGRlbiIsIm1zSGlkZGVuIiwib0hpZGRlbiIsImRvY3VtZW50SGlkZGVuIiwiZG9jdW1lbnRWaXNpYmlsaXR5U3RhdGUiLCJtb2RpZmllZFNpemUiLCJ3aW5XaWR0aCIsImlubmVyV2lkdGgiLCJ3aW5IZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnQiLCJ0b3AiLCJNYXRoIiwicm91bmQiLCJzZXRWaWRlb1Bvc2l0aW9uIiwic2V0Q2FudmFzUG9zaXRpb24iLCJjc3NPYmoiLCJhdHRyIiwiZHJhd0ltYWdlIiwibm93IiwiRGF0ZSIsImVsYXBzZWRUaW1lIiwic2VlayIsInN0b3AiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wQW5pbWF0aW9uRnJhbWVJT1MiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInZpZGVvU291cmNlVHBsIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJ0b0xvd2VyQ2FzZSIsInRwbCIsIm1vZGlmaWVkU2l6ZVciLCJtb2RpZmllZFNpemVIIiwiY2VpbCIsInJhdGlvIiwibWluIiwiZnVuYyIsImdldFZpZGVvU2l6ZUFzcGVjdEZpbGwiLCJBU1BFQ1RfRklUIiwiZ2V0VmlkZW9TaXplQXNwZWN0Rml0IiwiV0lEVEhfRklUIiwiZ2V0VmlkZW9TaXplV2lkdGhGaXQiLCJ0ZXN0IiwibmF2aWdhdG9yIiwicGxhdGZvcm0iLCJzZWNvbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7SUFBTUEsbUI7QUFDSiwrQkFBWUMsT0FBWixFQUFxQjtBQUFBOztBQUNuQixRQUFJQyxJQUFJLElBQVI7O0FBRUFBLE1BQUVDLE1BQUYsR0FBVztBQUNUQyxjQUFRLElBREM7QUFFVEMsa0JBQVksT0FGSDtBQUdUQyxtQkFBYSxRQUhKO0FBSVRDLGFBQU8sR0FKRTtBQUtUQyxjQUFRLEdBTEM7QUFNVEMsY0FBUSxRQU5DO0FBT1RDLGNBQVEsUUFQQzs7QUFTVEMsV0FB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QjtBQUNEO0FBQ0Y7Ozs7OztBQUVIMUgsb0JBQW9Ca0IsV0FBcEIsR0FBa0MsYUFBbEM7QUFDQWxCLG9CQUFvQm1ILFVBQXBCLEdBQWlDLFlBQWpDO0FBQ0FuSCxvQkFBb0JxSCxTQUFwQixHQUFnQyxXQUFoQzs7a0JBRWVySCxtQiIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRnVsbFNpemVDYW52YXNWaWRlbyB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgbGV0IF8gPSB0aGlzO1xyXG5cclxuICAgIF8ub3B0aW9uID0ge1xyXG4gICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgIHZpZGVvQ2xhc3M6ICd2aWRlbycsXHJcbiAgICAgIGNhbnZhc0NsYXNzOiAnY2FudmFzJyxcclxuICAgICAgd2lkdGg6IDMyMCxcclxuICAgICAgaGVpZ2h0OiAyNDAsXHJcbiAgICAgIGFsaWduWDogJ2NlbnRlcicsXHJcbiAgICAgIGFsaWduWTogJ2NlbnRlcicsXHJcblxyXG4gICAgICBmcHM6IDYwLFxyXG4gICAgICB2aWRlb1VybDogJycsXHJcbiAgICAgIHBvc3RlclVybDogJycsXHJcblxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgbXV0ZWQ6IGZhbHNlLFxyXG5cclxuICAgICAgY29udGVudE1vZGU6IEZ1bGxTaXplQ2FudmFzVmlkZW8uQVNQRUNUX0ZJTEwsIC8vIEZ1bGxTaXplQ2FudmFzVmlkZW8uQVNQRUNUX0ZJTEwsIEZ1bGxTaXplQ2FudmFzVmlkZW8uQVNQRUNUX0ZJVCwgRnVsbFNpemVDYW52YXNWaWRlby5XSURUSF9GSVRcclxuXHJcbiAgICAgIGNhbnBsYXlDYWxsYmFjazogbnVsbCxcclxuICAgICAgdGltZXVwZGF0ZUNhbGxiYWNrOiBudWxsLFxyXG4gICAgICBlbmRlZENhbGxiYWNrOiBudWxsLFxyXG5cclxuICAgICAgdmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrOiBudWxsXHJcbiAgICB9O1xyXG4gICAgJC5leHRlbmQoXy5vcHRpb24sIG9wdGlvbnMpO1xyXG5cclxuICAgIF8ucGFyZW50ID0gXy5vcHRpb24ucGFyZW50O1xyXG5cclxuICAgIGlmIChfLnBhcmVudC5sZW5ndGggPD0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Z1bGxTaXplQ2FudmFzVmlkZW8gQ2xhc3MgcmVxdWlyZSBvcHRpb25zIGhhdmUgcGFyZW50LicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgXy4kdmlkZW8gPSBudWxsO1xyXG4gICAgXy4kY2FudmFzID0gbnVsbDtcclxuXHJcbiAgICBfLnZpZGVvID0gbnVsbDtcclxuICAgIF8uY2FudmFzID0gbnVsbDtcclxuICAgIF8uY3R4ID0gbnVsbDtcclxuXHJcbiAgICBfLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgXy5sYXN0UmVuZGVyVGltZSA9IDA7XHJcbiAgICBfLmFuaW1hdGlvbkZyYW1lID0gbnVsbDtcclxuXHJcbiAgICBfLmdldFZpZGVvU2l6ZSA9IF8uZ2V0VmlkZW9Db250ZW50TW9kZUZ1bmMoXy5vcHRpb24uY29udGVudE1vZGUpO1xyXG4gICAgXy4kcHJveHlSZXNpemUgPSAkLnByb3h5KF8ucmVzaXplLCBfKTtcclxuICB9XHJcblxyXG4gIGluaXQob2JqKSB7XHJcbiAgICB0aGlzLnNldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLnNldENhbGxiYWNrcygpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5zdGFuY2UoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIF8uJHZpZGVvID0gJChfLmdldFZpZGVvVHBsKCkpLmNzcyh7cG9zaXRpb246ICdhYnNvbHV0ZSd9KTtcclxuICAgIF8uJGNhbnZhcyA9ICQoXy5nZXRDYW52YXNUcGwoKSkuY3NzKHtwb3NpdGlvbjogJ2Fic29sdXRlJ30pO1xyXG4gICAgXy5wYXJlbnQuYXBwZW5kKF8uJHZpZGVvKTtcclxuICAgIF8ucGFyZW50LmFwcGVuZChfLiRjYW52YXMpO1xyXG5cclxuICAgIF8udmlkZW8gPSBfLiR2aWRlby5nZXQoMCk7XHJcbiAgICBfLmNhbnZhcyA9IF8uJGNhbnZhcy5nZXQoMCk7XHJcbiAgICBfLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgaWYgKG9wdC5sb29wID09PSB0cnVlKSBfLnZpZGVvLnNldEF0dHJpYnV0ZSgnbG9vcCcsICcnKTtcclxuICAgIGlmIChvcHQubXV0ZWQgPT09IHRydWUpIF8udmlkZW8uc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTtcclxuICAgIGlmIChvcHQuYXV0b3BsYXkgPT09IHRydWUpIF8udmlkZW8uc2V0QXR0cmlidXRlKCdhdXRvcGxheScsICcnKTsgLy8gaU9TIHZpZGVvIG5vZGUgYWxyZWFkeSBoYXMgXCJhdXRvcGxheVwiIGF0dHJpYnV0ZVxyXG5cclxuICAgIGxldCBzaXplID0gXy5nZXRWaWRlb1NpemUoKTtcclxuICAgIF8uc2V0VmlkZW9TaXplKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcclxuICAgIF8uc2V0Q2FudmFzU2l6ZShzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XHJcbiAgICBfLnNldFdyYXBBbGlnbihvcHQuYWxpZ25YLCBvcHQuYWxpZ25ZLCBzaXplKTtcclxuXHJcbiAgICBpZiAoXy5pc0lPUygpKSB7XHJcbiAgICAgIF8uJHZpZGVvLmhpZGUoKTtcclxuXHJcbiAgICAgIF8ucGxheSgpO1xyXG4gICAgICBpZiAoIV8ub3B0aW9uLmF1dG9wbGF5KSBfLnBhdXNlKCk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy4kY2FudmFzLmhpZGUoKTtcclxuXHJcbiAgICAgIF8uJHZpZGVvLm9uKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICBfLnBsYXkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLiRwcm94eVJlc2l6ZSk7XHJcbiAgICBfLnJlc2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2FsbGJhY2tzKCkge1xyXG4gICAgbGV0IF8gPSB0aGlzLFxyXG4gICAgICBvcHQgPSBfLm9wdGlvbixcclxuICAgICAgaXNWaWRlb0hhc09uZW5kZWQgPSBfLnZpZGVvLmhhc093blByb3BlcnR5KCdvbmVuZGVkJyk7XHJcblxyXG4gICAgaWYgKF8uaXNJT1MoKSkge1xyXG4gICAgICBfLiR2aWRlby5vbignY2FucGxheScsIChldnQpID0+IHtcclxuICAgICAgICBfLmRyYXdWaWRlb1RvQ2FudmFzKCk7XHJcbiAgICAgICAgaWYgKG9wdC5jYW5wbGF5Q2FsbGJhY2spIHtcclxuICAgICAgICAgIG9wdC5jYW5wbGF5Q2FsbGJhY2suY2FsbChudWxsLCB7XHJcbiAgICAgICAgICAgIGV2ZW50OiBldnQsXHJcbiAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgXy4kdmlkZW8ub24oJ3RpbWV1cGRhdGUnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgXy5kcmF3VmlkZW9Ub0NhbnZhcygpO1xyXG5cclxuICAgICAgICBpZiAob3B0LnRpbWV1cGRhdGVDYWxsYmFjaykge1xyXG4gICAgICAgICAgb3B0LnRpbWV1cGRhdGVDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgZXZlbnQ6IGV2dCxcclxuICAgICAgICAgICAgdmlkZW86IF8udmlkZW8sXHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogXy52aWRlby5kdXJhdGlvblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfLiR2aWRlby5vbignY2FucGxheScsIChldnQpID0+IHtcclxuICAgICAgICBpZiAob3B0LmNhbnBsYXlDYWxsYmFjaykge1xyXG4gICAgICAgICAgb3B0LmNhbnBsYXlDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgZXZlbnQ6IGV2dCxcclxuICAgICAgICAgICAgdmlkZW86IF8udmlkZW9cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAob3B0LnRpbWV1cGRhdGVDYWxsYmFjayB8fCAoIWlzVmlkZW9IYXNPbmVuZGVkICYmIG9wdC5lbmRlZENhbGxiYWNrKSkge1xyXG4gICAgICAgIF8uJHZpZGVvLm9uKCd0aW1ldXBkYXRlJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgaWYgKG9wdC50aW1ldXBkYXRlQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgb3B0LnRpbWV1cGRhdGVDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgICBldmVudDogZXZ0LFxyXG4gICAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBfLnZpZGVvLmR1cmF0aW9uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChvcHQuZW5kZWRDYWxsYmFjayAmJiAoXy52aWRlby5jdXJyZW50VGltZSA+PSBfLnZpZGVvLmR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICBpZiAob3B0Lmxvb3AgPT09IHRydWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIF8uaXNQbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBvcHQuZW5kZWRDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgICBldmVudDogZXZ0LFxyXG4gICAgICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBfLnZpZGVvLmR1cmF0aW9uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNWaWRlb0hhc09uZW5kZWQgJiYgb3B0LmVuZGVkQ2FsbGJhY2spIHtcclxuICAgICAgICAvLyBUT0RPIC0gbm8gYnJvd3NlciBzdXBwb3J0ICdlbmRlZCcgZXZlbnQgbm93LiAyMDE2LjExLjE1XHJcbiAgICAgICAgJCh2aWRlbykub24oJ2VuZGVkJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgXy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICBvcHQuZW5kZWRDYWxsYmFjay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgZXZlbnQ6IGV2dCxcclxuICAgICAgICAgICAgdmlkZW86IF8udmlkZW8sXHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBfLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogXy52aWRlby5kdXJhdGlvblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0LnZpc2liaWxpdHljaGFuZ2VDYWxsYmFjaykge1xyXG4gICAgICBsZXQgaGlkZGVuLCB2aXNpYmlsaXR5U3RhdGUsIHZpc2liaWxpdHlDaGFuZ2U7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmhpZGRlbiAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gT3BlcmEgMTIuMTAgYW5kIEZpcmVmb3ggMTggYW5kIGxhdGVyIHN1cHBvcnRcclxuICAgICAgICBoaWRkZW4gPSAnaGlkZGVuJztcclxuICAgICAgICB2aXNpYmlsaXR5U3RhdGUgPSAndmlzaWJpbGl0eVN0YXRlJztcclxuICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3Zpc2liaWxpdHljaGFuZ2UnO1xyXG5cclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQud2Via2l0SGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGhpZGRlbiA9ICd3ZWJraXRIaWRkZW4nO1xyXG4gICAgICAgIHZpc2liaWxpdHlTdGF0ZSA9ICd3ZWJraXRWaXNpYmlsaXR5U3RhdGUnO1xyXG4gICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAnd2Via2l0dmlzaWJpbGl0eWNoYW5nZSc7XHJcblxyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5tb3pIaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaGlkZGVuID0gJ21vekhpZGRlbic7XHJcbiAgICAgICAgdmlzaWJpbGl0eVN0YXRlID0gJ21velZpc2liaWxpdHlTdGF0ZSc7XHJcbiAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9ICdtb3p2aXNpYmlsaXR5Y2hhbmdlJztcclxuXHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Lm1zSGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGhpZGRlbiA9ICdtc0hpZGRlbic7XHJcbiAgICAgICAgdmlzaWJpbGl0eVN0YXRlID0gJ21zVmlzaWJpbGl0eVN0YXRlJztcclxuICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21zdmlzaWJpbGl0eWNoYW5nZSc7XHJcblxyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5vSGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGhpZGRlbiA9ICdvSGlkZGVuJztcclxuICAgICAgICB2aXNpYmlsaXR5U3RhdGUgPSAnb1Zpc2liaWxpdHlTdGF0ZSc7XHJcbiAgICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9ICdvdmlzaWJpbGl0eWNoYW5nZSc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKHZpc2liaWxpdHlDaGFuZ2UsIChldnQpID0+IHtcclxuICAgICAgICBvcHQudmlzaWJpbGl0eWNoYW5nZUNhbGxiYWNrLmNhbGwobnVsbCwge1xyXG4gICAgICAgICAgZXZlbnQ6IGV2dCxcclxuICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgZG9jdW1lbnRIaWRkZW46IGRvY3VtZW50W2hpZGRlbl0sXHJcbiAgICAgICAgICBkb2N1bWVudFZpc2liaWxpdHlTdGF0ZTogZG9jdW1lbnRbdmlzaWJpbGl0eVN0YXRlXSAvLyB2aXNpYmxlLCBoaWRkZW4sIHByZXJlbmRlciwgdW5sb2FkZWRcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRXcmFwQWxpZ24oYWxpZ25YLCBhbGlnblksIG1vZGlmaWVkU2l6ZSkge1xyXG4gICAgbGV0IHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgIHdpbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCxcclxuICAgICAgbGVmdCA9IDAsXHJcbiAgICAgIHRvcCA9IDA7XHJcblxyXG4gICAgc3dpdGNoIChhbGlnblgpIHtcclxuICAgICAgY2FzZSAnbGVmdCcgOlxyXG4gICAgICAgIGxlZnQgPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnY2VudGVyJyA6XHJcbiAgICAgICAgbGVmdCA9IE1hdGgucm91bmQoKHdpbldpZHRoIC0gbW9kaWZpZWRTaXplLndpZHRoKSAvIDIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAncmlnaHQnIDpcclxuICAgICAgICBsZWZ0ID0gTWF0aC5yb3VuZCh3aW5XaWR0aCAtIG1vZGlmaWVkU2l6ZS53aWR0aCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChhbGlnblkpIHtcclxuICAgICAgY2FzZSAndG9wJyA6XHJcbiAgICAgICAgdG9wID0gMDtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ2NlbnRlcicgOlxyXG4gICAgICAgIHRvcCA9IE1hdGgucm91bmQoKHdpbkhlaWdodCAtIG1vZGlmaWVkU2l6ZS5oZWlnaHQpIC8gMik7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdib3R0b20nIDpcclxuICAgICAgICB0b3AgPSBNYXRoLnJvdW5kKHdpbkhlaWdodCAtIG1vZGlmaWVkU2l6ZS5oZWlnaHQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0VmlkZW9Qb3NpdGlvbih7bGVmdDogbGVmdCwgdG9wOiB0b3B9KTtcclxuICAgIHRoaXMuc2V0Q2FudmFzUG9zaXRpb24oe2xlZnQ6IGxlZnQsIHRvcDogdG9wfSlcclxuICB9XHJcblxyXG4gIHNldFZpZGVvUG9zaXRpb24oY3NzT2JqKSB7XHJcbiAgICB0aGlzLiR2aWRlby5jc3MoY3NzT2JqKTtcclxuICB9XHJcblxyXG4gIHNldENhbnZhc1Bvc2l0aW9uKGNzc09iaikge1xyXG4gICAgdGhpcy4kY2FudmFzLmNzcyhjc3NPYmopO1xyXG4gIH1cclxuXHJcbiAgc2V0VmlkZW9TaXplKHdpZHRoLCBoZWlnaHQpIHtcclxuICAgIHRoaXMuJHZpZGVvLndpZHRoKHdpZHRoKTtcclxuICAgIHRoaXMuJHZpZGVvLmhlaWdodChoZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2FudmFzU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICBsZXQgXyA9IHRoaXM7XHJcblxyXG4gICAgaWYgKF8uaXNJT1MoKSkge1xyXG4gICAgICBfLmN0eC5jYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgXy5jdHguY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgXy4kY2FudmFzLmF0dHIoe3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHR9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRyYXdWaWRlb1RvQ2FudmFzKCkge1xyXG4gICAgbGV0IF8gPSB0aGlzO1xyXG4gICAgXy5jdHguZHJhd0ltYWdlKF8udmlkZW8sIDAsIDAsIF8uJHZpZGVvLndpZHRoKCksIF8uJHZpZGVvLmhlaWdodCgpKTtcclxuICB9XHJcblxyXG4gIGxvb3BBbmltYXRpb25GcmFtZUlPUygpIHtcclxuICAgIGxldCBfID0gdGhpcyxcclxuICAgICAgb3B0ID0gXy5vcHRpb247XHJcblxyXG4gICAgbGV0IG5vdyA9IERhdGUubm93KCksXHJcbiAgICAgIGVsYXBzZWRUaW1lID0gKCBub3cgLSBfLmxhc3RSZW5kZXJUaW1lICkgLyAxMDAwO1xyXG5cclxuICAgIGlmIChlbGFwc2VkVGltZSA+PSAoMSAvIF8ub3B0aW9uLmZwcykpIHtcclxuICAgICAgXy52aWRlby5jdXJyZW50VGltZSA9IF8udmlkZW8uY3VycmVudFRpbWUgKyBlbGFwc2VkVGltZTtcclxuICAgICAgXy5sYXN0UmVuZGVyVGltZSA9IG5vdztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXy52aWRlby5jdXJyZW50VGltZSA+PSBfLnZpZGVvLmR1cmF0aW9uKSB7XHJcbiAgICAgIF8uaXNQbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAob3B0Lmxvb3AgPT09IHRydWUpIHtcclxuICAgICAgICBfLnNlZWsoMCk7XHJcbiAgICAgICAgXy5wbGF5KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3B0LmVuZGVkQ2FsbGJhY2suY2FsbChudWxsLCB7XHJcbiAgICAgICAgICBldmVudDogbnVsbCxcclxuICAgICAgICAgIHZpZGVvOiBfLnZpZGVvLFxyXG4gICAgICAgICAgY3VycmVudFRpbWU6IF8udmlkZW8uY3VycmVudFRpbWUsXHJcbiAgICAgICAgICBkdXJhdGlvbjogXy52aWRlby5kdXJhdGlvblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBfLnN0b3AoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChfLmlzUGxheWluZykge1xyXG4gICAgICBfLmFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICBfLmxvb3BBbmltYXRpb25GcmFtZUlPUygpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKF8uYW5pbWF0aW9uRnJhbWUpO1xyXG4gICAgICBfLmFuaW1hdGlvbkZyYW1lID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2l6ZShldnQpIHtcclxuICAgIGxldCBfID0gdGhpcyxcclxuICAgICAgc2l6ZSA9IF8uZ2V0VmlkZW9TaXplKCk7XHJcblxyXG4gICAgXy5zZXRWaWRlb1NpemUoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQpO1xyXG4gICAgXy5zZXRDYW52YXNTaXplKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcclxuICAgIF8uc2V0V3JhcEFsaWduKF8ub3B0aW9uLmFsaWduWCwgXy5vcHRpb24uYWxpZ25ZLCBzaXplKTtcclxuXHJcbiAgICBpZiAoXy5pc0lPUygpKSBfLmRyYXdWaWRlb1RvQ2FudmFzKCk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWRlb1RwbCgpIHtcclxuICAgIGxldCBfID0gdGhpcyxcclxuICAgICAgb3B0ID0gXy5vcHRpb247XHJcblxyXG4gICAgbGV0IHZpZGVvU291cmNlVHBsID0gJycsXHJcbiAgICAgIGV4dCA9IG9wdC52aWRlb1VybC5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB2aWRlb1NvdXJjZVRwbCArPSBgPHNvdXJjZSBzcmM9XCIke29wdC52aWRlb1VybH1cIiB0eXBlPVwidmlkZW8vJHtleHR9XCI+PC9zb3VyY2U+YDtcclxuXHJcbiAgICBsZXQgdHBsID0gYDx2aWRlbyBjbGFzcz1cIiR7b3B0LnZpZGVvQ2xhc3N9XCIgcG9zdGVyPVwiJHtvcHQucG9zdGVyVXJsfVwiPiR7dmlkZW9Tb3VyY2VUcGx9PC92aWRlbz5gO1xyXG4gICAgaWYgKF8uaXNJT1MoKSkge1xyXG4gICAgICB0cGwgPSBgPHZpZGVvIGNsYXNzPVwiJHtvcHQudmlkZW9DbGFzc31cIiBwb3N0ZXI9XCIke29wdC5wb3N0ZXJVcmx9XCIgYXV0b3BsYXk+JHt2aWRlb1NvdXJjZVRwbH08L3ZpZGVvPmA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRwbDtcclxuICB9XHJcblxyXG4gIGdldENhbnZhc1RwbCgpIHtcclxuICAgIHJldHVybiBgPGNhbnZhcyBjbGFzcz1cIiR7dGhpcy5vcHRpb24uY2FudmFzQ2xhc3N9XCI+PC9jYW52YXM+YDtcclxuICB9XHJcblxyXG4gIGdldFZpZGVvU2l6ZUFzcGVjdEZpbGwoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLFxyXG4gICAgICB3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICAgIG1vZGlmaWVkU2l6ZVcgPSB3aW5XaWR0aCxcclxuICAgICAgbW9kaWZpZWRTaXplSCA9IE1hdGguY2VpbCgod2luV2lkdGggLyBvcHQud2lkdGgpICogb3B0LmhlaWdodCk7XHJcblxyXG4gICAgaWYgKG1vZGlmaWVkU2l6ZUggPCB3aW5IZWlnaHQpIHtcclxuICAgICAgbW9kaWZpZWRTaXplVyA9IE1hdGguY2VpbCgod2luSGVpZ2h0IC8gb3B0LmhlaWdodCkgKiBvcHQud2lkdGgpO1xyXG4gICAgICBtb2RpZmllZFNpemVIID0gd2luSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZHRoOiBtb2RpZmllZFNpemVXLFxyXG4gICAgICBoZWlnaHQ6IG1vZGlmaWVkU2l6ZUhcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRWaWRlb1NpemVBc3BlY3RGaXQoKSB7XHJcbiAgICBsZXQgXyA9IHRoaXMsXHJcbiAgICAgIG9wdCA9IF8ub3B0aW9uO1xyXG5cclxuICAgIGxldCByYXRpbyA9IE1hdGgubWluKCAod2luZG93LmlubmVyV2lkdGggLyBvcHQud2lkdGgpLCAod2luZG93LmlubmVySGVpZ2h0IC8gb3B0LmhlaWdodCkgKTtcclxuICAgIGxldCBtb2RpZmllZFNpemVXID0gTWF0aC5jZWlsKG9wdC53aWR0aCAqIHJhdGlvKSxcclxuICAgICAgbW9kaWZpZWRTaXplSCA9IE1hdGguY2VpbChvcHQuaGVpZ2h0ICogcmF0aW8pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZHRoOiBtb2RpZmllZFNpemVXLFxyXG4gICAgICBoZWlnaHQ6IG1vZGlmaWVkU2l6ZUhcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRWaWRlb1NpemVXaWR0aEZpdCgpIHtcclxuICAgIGxldCBfID0gdGhpcyxcclxuICAgICAgb3B0ID0gXy5vcHRpb247XHJcblxyXG4gICAgbGV0IHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgIG1vZGlmaWVkU2l6ZVcgPSB3aW5XaWR0aCxcclxuICAgICAgbW9kaWZpZWRTaXplSCA9IE1hdGguY2VpbCgod2luV2lkdGggLyBvcHQud2lkdGgpICogb3B0LmhlaWdodCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IG1vZGlmaWVkU2l6ZVcsXHJcbiAgICAgIGhlaWdodDogbW9kaWZpZWRTaXplSFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VmlkZW9Db250ZW50TW9kZUZ1bmMoY29udGVudE1vZGUpIHtcclxuICAgIGxldCBmdW5jID0gbnVsbDtcclxuXHJcbiAgICBzd2l0Y2goY29udGVudE1vZGUpIHtcclxuICAgICAgY2FzZSBGdWxsU2l6ZUNhbnZhc1ZpZGVvLkFTUEVDVF9GSUxMIDogXHJcbiAgICAgICAgZnVuYyA9IHRoaXMuZ2V0VmlkZW9TaXplQXNwZWN0RmlsbDtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgRnVsbFNpemVDYW52YXNWaWRlby5BU1BFQ1RfRklUIDpcclxuICAgICAgICBmdW5jID0gdGhpcy5nZXRWaWRlb1NpemVBc3BlY3RGaXQ7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlIEZ1bGxTaXplQ2FudmFzVmlkZW8uV0lEVEhfRklUIDpcclxuICAgICAgICBmdW5jID0gdGhpcy5nZXRWaWRlb1NpemVXaWR0aEZpdDtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZnVuYztcclxuICB9XHJcblxyXG4gIGlzSU9TKCkge1xyXG4gICAgcmV0dXJuIC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XHJcbiAgfVxyXG5cclxuICBwbGF5KCkge1xyXG4gICAgbGV0IF8gPSB0aGlzO1xyXG4gICAgaWYgKCFfLnZpZGVvKSByZXR1cm47XHJcblxyXG4gICAgaWYgKF8uaXNJT1MoKSkge1xyXG4gICAgICBfLmxhc3RSZW5kZXJUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgXy5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICBfLmxvb3BBbmltYXRpb25GcmFtZUlPUygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgXy5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICBfLnZpZGVvLnBsYXkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhdXNlKCkge1xyXG4gICAgbGV0IF8gPSB0aGlzO1xyXG4gICAgaWYgKCFfLnZpZGVvKSByZXR1cm47XHJcblxyXG4gICAgaWYgKF8uaXNJT1MoKSkge1xyXG4gICAgICBfLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgXy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgXy52aWRlby5wYXVzZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RvcCgpIHtcclxuICAgIGxldCBfID0gdGhpcztcclxuICAgIGlmICghXy52aWRlbykgcmV0dXJuO1xyXG5cclxuICAgIGlmIChfLmlzSU9TKCkpIHtcclxuICAgICAgXy5wYXVzZSgpO1xyXG4gICAgICBfLnNlZWsoMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBfLnZpZGVvLnBhdXNlKCk7XHJcbiAgICAgIF8udmlkZW8uY3VycmVudFRpbWUgPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2VlayhzZWNvbmQpIHtcclxuICAgIGxldCBfID0gdGhpcztcclxuICAgIGlmICghXy52aWRlbykgcmV0dXJuO1xyXG5cclxuICAgIGlmIChfLmlzSU9TKCkpIHtcclxuICAgICAgXy52aWRlby5jdXJyZW50VGltZSA9IHNlY29uZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF8udmlkZW8uY3VycmVudFRpbWUgPSBzZWNvbmQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbkZ1bGxTaXplQ2FudmFzVmlkZW8uQVNQRUNUX0ZJTEwgPSAnQVNQRUNUX0ZJTEwnO1xyXG5GdWxsU2l6ZUNhbnZhc1ZpZGVvLkFTUEVDVF9GSVQgPSAnQVNQRUNUX0ZJVCc7XHJcbkZ1bGxTaXplQ2FudmFzVmlkZW8uV0lEVEhfRklUID0gJ1dJRFRIX0ZJVCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGdWxsU2l6ZUNhbnZhc1ZpZGVvO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zcmMvY29tcG9uZW50L0Z1bGxTaXplQ2FudmFzVmlkZW8uanMiXSwic291cmNlUm9vdCI6IiJ9");
}]);